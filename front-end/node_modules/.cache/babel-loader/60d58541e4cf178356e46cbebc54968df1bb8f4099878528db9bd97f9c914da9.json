{"ast":null,"code":"var _jsxFileName = \"C:\\\\icmp_events_api\\\\front-end\\\\src\\\\components\\\\Login.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { TextField, Button, Typography, Card, CardContent, Box, CircularProgress } from '@mui/material';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Login({\n  setIsAuthenticated,\n  handleSnackbarOpen\n}) {\n  _s();\n  const [isLoading, setIsLoading] = useState(false);\n  const [apiKey, setApiKey] = useState('');\n  const [userId, setUserId] = useState('');\n  const [businessId, setBusinessId] = useState('');\n  const [businessApiKey, setBusinessApiKey] = useState('');\n  const navigate = useNavigate();\n  const handleLogin = async () => {\n    // Validate local\n    if (!apiKey || !userId || !businessId || !businessApiKey) {\n      handleSnackbarOpen(\"Please enter all the configuration values\", \"warning\");\n      return;\n    }\n    setIsLoading(true);\n    try {\n      const response = await fetch('/validate_config', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${apiKey}`\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          apiKey,\n          userId,\n          businessId,\n          businessApiKey\n        })\n      });\n      const data = await response.json();\n      if (response.ok && data.isValid) {\n        // Save the configuration\n        const saveResponse = await fetch('/api/save-config', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          credentials: 'include',\n          body: JSON.stringify({\n            apiKey,\n            userId,\n            businessId,\n            businessApiKey\n          })\n        });\n        const saveData = await saveResponse.json();\n        if (saveResponse.ok && saveData.success) {\n          setIsAuthenticated(true);\n          handleSnackbarOpen(\"Login successful!\", \"success\");\n          navigate('/');\n        } else {\n          handleSnackbarOpen(saveData.error || \"Failed to save configuration\", \"error\");\n        }\n      } else {\n        handleSnackbarOpen(data.error || \"Invalid credentials\", \"error\");\n      }\n    } catch (error) {\n      console.error('Login error:', error);\n      handleSnackbarOpen(\"An error occurred during login\", \"error\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Card, {\n    sx: {\n      mt: 4,\n      maxWidth: 400,\n      mx: 'auto'\n    },\n    children: /*#__PURE__*/_jsxDEV(CardContent, {\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h5\",\n        gutterBottom: true,\n        align: \"center\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          flexDirection: 'column',\n          gap: 2,\n          mt: 2\n        },\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          label: \"ICMP API Key\",\n          variant: \"outlined\",\n          value: apiKey,\n          onChange: e => setApiKey(e.target.value),\n          disabled: isLoading,\n          type: \"password\",\n          required: true,\n          error: !apiKey,\n          helperText: !apiKey ? \"ICMP API Key is required\" : \"\",\n          fullWidth: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          label: \"Business API Key\",\n          variant: \"outlined\",\n          value: businessApiKey,\n          onChange: e => setBusinessApiKey(e.target.value),\n          disabled: isLoading,\n          type: \"password\",\n          required: true,\n          error: !businessApiKey,\n          helperText: !businessApiKey ? \"Business API Key is required\" : \"\",\n          fullWidth: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          label: \"User ID\",\n          variant: \"outlined\",\n          value: userId,\n          onChange: e => setUserId(e.target.value),\n          disabled: isLoading,\n          required: true,\n          error: !userId,\n          helperText: !userId ? \"User ID is required\" : \"\",\n          fullWidth: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          label: \"Business ID\",\n          variant: \"outlined\",\n          value: businessId,\n          onChange: e => setBusinessId(e.target.value),\n          disabled: isLoading,\n          required: true,\n          error: !businessId,\n          helperText: !businessId ? \"Business ID is required\" : \"\",\n          fullWidth: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          onClick: handleLogin,\n          disabled: isLoading || !apiKey || !userId || !businessId || !businessApiKey,\n          fullWidth: true,\n          children: isLoading ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n            size: 24\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 38\n          }, this) : 'Login'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 9\n  }, this);\n}\n_s(Login, \"CIDrv2m1Py2rOmbCKFw/5AKl2fk=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","TextField","Button","Typography","Card","CardContent","Box","CircularProgress","useNavigate","jsxDEV","_jsxDEV","Login","setIsAuthenticated","handleSnackbarOpen","_s","isLoading","setIsLoading","apiKey","setApiKey","userId","setUserId","businessId","setBusinessId","businessApiKey","setBusinessApiKey","navigate","handleLogin","response","fetch","method","headers","credentials","body","JSON","stringify","data","json","ok","isValid","saveResponse","saveData","success","error","console","sx","mt","maxWidth","mx","children","variant","gutterBottom","align","fileName","_jsxFileName","lineNumber","columnNumber","display","flexDirection","gap","label","value","onChange","e","target","disabled","type","required","helperText","fullWidth","onClick","size","_c","$RefreshReg$"],"sources":["C:/icmp_events_api/front-end/src/components/Login.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { TextField, Button, Typography, Card, CardContent, Box, CircularProgress } from '@mui/material';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction Login({ setIsAuthenticated, handleSnackbarOpen }) {\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [apiKey, setApiKey] = useState('');\r\n    const [userId, setUserId] = useState('');\r\n    const [businessId, setBusinessId] = useState('');\r\n    const [businessApiKey, setBusinessApiKey] = useState('');\r\n    const navigate = useNavigate();\r\n\r\n    const handleLogin = async () => {\r\n        // Validate local\r\n        if (!apiKey || !userId || !businessId || !businessApiKey) {\r\n            handleSnackbarOpen(\"Please enter all the configuration values\", \"warning\");\r\n            return;\r\n        }\r\n\r\n        setIsLoading(true);\r\n        try {\r\n            const response = await fetch('/validate_config', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': `Bearer ${apiKey}`\r\n                },\r\n                credentials: 'include',\r\n                body: JSON.stringify({\r\n                    apiKey,\r\n                    userId,\r\n                    businessId,\r\n                    businessApiKey\r\n                })\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (response.ok && data.isValid) {\r\n                // Save the configuration\r\n                const saveResponse = await fetch('/api/save-config', {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                    },\r\n                    credentials: 'include',\r\n                    body: JSON.stringify({\r\n                        apiKey,\r\n                        userId,\r\n                        businessId,\r\n                        businessApiKey\r\n                    })\r\n                });\r\n\r\n                const saveData = await saveResponse.json();\r\n\r\n                if (saveResponse.ok && saveData.success) {\r\n                    setIsAuthenticated(true);\r\n                    handleSnackbarOpen(\"Login successful!\", \"success\");\r\n                    navigate('/');\r\n                } else {\r\n                    handleSnackbarOpen(saveData.error || \"Failed to save configuration\", \"error\");\r\n                }\r\n            } else {\r\n                handleSnackbarOpen(data.error || \"Invalid credentials\", \"error\");\r\n            }\r\n        } catch (error) {\r\n            console.error('Login error:', error);\r\n            handleSnackbarOpen(\"An error occurred during login\", \"error\");\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Card sx={{ mt: 4, maxWidth: 400, mx: 'auto' }}>\r\n            <CardContent>\r\n                <Typography variant=\"h5\" gutterBottom align=\"center\">\r\n                    Login\r\n                </Typography>\r\n                <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2, mt: 2 }}>\r\n                    <TextField\r\n                        label=\"ICMP API Key\"\r\n                        variant=\"outlined\"\r\n                        value={apiKey}\r\n                        onChange={(e) => setApiKey(e.target.value)}\r\n                        disabled={isLoading}\r\n                        type=\"password\"\r\n                        required\r\n                        error={!apiKey}\r\n                        helperText={!apiKey ? \"ICMP API Key is required\" : \"\"}\r\n                        fullWidth\r\n                    />\r\n                    <TextField\r\n                        label=\"Business API Key\"\r\n                        variant=\"outlined\"\r\n                        value={businessApiKey}\r\n                        onChange={(e) => setBusinessApiKey(e.target.value)}\r\n                        disabled={isLoading}\r\n                        type=\"password\"\r\n                        required\r\n                        error={!businessApiKey}\r\n                        helperText={!businessApiKey ? \"Business API Key is required\" : \"\"}\r\n                        fullWidth\r\n                    />\r\n                    <TextField \r\n                        label=\"User ID\" \r\n                        variant=\"outlined\" \r\n                        value={userId}\r\n                        onChange={(e) => setUserId(e.target.value)}\r\n                        disabled={isLoading}\r\n                        required\r\n                        error={!userId}\r\n                        helperText={!userId ? \"User ID is required\" : \"\"}\r\n                        fullWidth\r\n                    />\r\n                    <TextField \r\n                        label=\"Business ID\" \r\n                        variant=\"outlined\" \r\n                        value={businessId}\r\n                        onChange={(e) => setBusinessId(e.target.value)}\r\n                        disabled={isLoading}\r\n                        required\r\n                        error={!businessId}\r\n                        helperText={!businessId ? \"Business ID is required\" : \"\"}\r\n                        fullWidth\r\n                    />\r\n\r\n                    <Button \r\n                        variant=\"contained\" \r\n                        onClick={handleLogin} \r\n                        disabled={isLoading || !apiKey || !userId || !businessId || !businessApiKey}\r\n                        fullWidth\r\n                    >\r\n                        {isLoading ? <CircularProgress size={24} /> : 'Login'}\r\n                    </Button>\r\n                </Box>\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n}\r\n\r\nexport default Login; "],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,SAAS,EAAEC,MAAM,EAAEC,UAAU,EAAEC,IAAI,EAAEC,WAAW,EAAEC,GAAG,EAAEC,gBAAgB,QAAQ,eAAe;AACvG,SAASC,WAAW,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE/C,SAASC,KAAKA,CAAC;EAAEC,kBAAkB;EAAEC;AAAmB,CAAC,EAAE;EAAAC,EAAA;EACvD,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGhB,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACiB,MAAM,EAAEC,SAAS,CAAC,GAAGlB,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACmB,MAAM,EAAEC,SAAS,CAAC,GAAGpB,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACqB,UAAU,EAAEC,aAAa,CAAC,GAAGtB,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACuB,cAAc,EAAEC,iBAAiB,CAAC,GAAGxB,QAAQ,CAAC,EAAE,CAAC;EACxD,MAAMyB,QAAQ,GAAGjB,WAAW,CAAC,CAAC;EAE9B,MAAMkB,WAAW,GAAG,MAAAA,CAAA,KAAY;IAC5B;IACA,IAAI,CAACT,MAAM,IAAI,CAACE,MAAM,IAAI,CAACE,UAAU,IAAI,CAACE,cAAc,EAAE;MACtDV,kBAAkB,CAAC,2CAA2C,EAAE,SAAS,CAAC;MAC1E;IACJ;IAEAG,YAAY,CAAC,IAAI,CAAC;IAClB,IAAI;MACA,MAAMW,QAAQ,GAAG,MAAMC,KAAK,CAAC,kBAAkB,EAAE;QAC7CC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACL,cAAc,EAAE,kBAAkB;UAClC,eAAe,EAAE,UAAUb,MAAM;QACrC,CAAC;QACDc,WAAW,EAAE,SAAS;QACtBC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UACjBjB,MAAM;UACNE,MAAM;UACNE,UAAU;UACVE;QACJ,CAAC;MACL,CAAC,CAAC;MAEF,MAAMY,IAAI,GAAG,MAAMR,QAAQ,CAACS,IAAI,CAAC,CAAC;MAElC,IAAIT,QAAQ,CAACU,EAAE,IAAIF,IAAI,CAACG,OAAO,EAAE;QAC7B;QACA,MAAMC,YAAY,GAAG,MAAMX,KAAK,CAAC,kBAAkB,EAAE;UACjDC,MAAM,EAAE,MAAM;UACdC,OAAO,EAAE;YACL,cAAc,EAAE;UACpB,CAAC;UACDC,WAAW,EAAE,SAAS;UACtBC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;YACjBjB,MAAM;YACNE,MAAM;YACNE,UAAU;YACVE;UACJ,CAAC;QACL,CAAC,CAAC;QAEF,MAAMiB,QAAQ,GAAG,MAAMD,YAAY,CAACH,IAAI,CAAC,CAAC;QAE1C,IAAIG,YAAY,CAACF,EAAE,IAAIG,QAAQ,CAACC,OAAO,EAAE;UACrC7B,kBAAkB,CAAC,IAAI,CAAC;UACxBC,kBAAkB,CAAC,mBAAmB,EAAE,SAAS,CAAC;UAClDY,QAAQ,CAAC,GAAG,CAAC;QACjB,CAAC,MAAM;UACHZ,kBAAkB,CAAC2B,QAAQ,CAACE,KAAK,IAAI,8BAA8B,EAAE,OAAO,CAAC;QACjF;MACJ,CAAC,MAAM;QACH7B,kBAAkB,CAACsB,IAAI,CAACO,KAAK,IAAI,qBAAqB,EAAE,OAAO,CAAC;MACpE;IACJ,CAAC,CAAC,OAAOA,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,cAAc,EAAEA,KAAK,CAAC;MACpC7B,kBAAkB,CAAC,gCAAgC,EAAE,OAAO,CAAC;IACjE,CAAC,SAAS;MACNG,YAAY,CAAC,KAAK,CAAC;IACvB;EACJ,CAAC;EAED,oBACIN,OAAA,CAACN,IAAI;IAACwC,EAAE,EAAE;MAAEC,EAAE,EAAE,CAAC;MAAEC,QAAQ,EAAE,GAAG;MAAEC,EAAE,EAAE;IAAO,CAAE;IAAAC,QAAA,eAC3CtC,OAAA,CAACL,WAAW;MAAA2C,QAAA,gBACRtC,OAAA,CAACP,UAAU;QAAC8C,OAAO,EAAC,IAAI;QAACC,YAAY;QAACC,KAAK,EAAC,QAAQ;QAAAH,QAAA,EAAC;MAErD;QAAAI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAY,CAAC,eACb7C,OAAA,CAACJ,GAAG;QAACsC,EAAE,EAAE;UAAEY,OAAO,EAAE,MAAM;UAAEC,aAAa,EAAE,QAAQ;UAAEC,GAAG,EAAE,CAAC;UAAEb,EAAE,EAAE;QAAE,CAAE;QAAAG,QAAA,gBACjEtC,OAAA,CAACT,SAAS;UACN0D,KAAK,EAAC,cAAc;UACpBV,OAAO,EAAC,UAAU;UAClBW,KAAK,EAAE3C,MAAO;UACd4C,QAAQ,EAAGC,CAAC,IAAK5C,SAAS,CAAC4C,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;UAC3CI,QAAQ,EAAEjD,SAAU;UACpBkD,IAAI,EAAC,UAAU;UACfC,QAAQ;UACRxB,KAAK,EAAE,CAACzB,MAAO;UACfkD,UAAU,EAAE,CAAClD,MAAM,GAAG,0BAA0B,GAAG,EAAG;UACtDmD,SAAS;QAAA;UAAAhB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACZ,CAAC,eACF7C,OAAA,CAACT,SAAS;UACN0D,KAAK,EAAC,kBAAkB;UACxBV,OAAO,EAAC,UAAU;UAClBW,KAAK,EAAErC,cAAe;UACtBsC,QAAQ,EAAGC,CAAC,IAAKtC,iBAAiB,CAACsC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;UACnDI,QAAQ,EAAEjD,SAAU;UACpBkD,IAAI,EAAC,UAAU;UACfC,QAAQ;UACRxB,KAAK,EAAE,CAACnB,cAAe;UACvB4C,UAAU,EAAE,CAAC5C,cAAc,GAAG,8BAA8B,GAAG,EAAG;UAClE6C,SAAS;QAAA;UAAAhB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACZ,CAAC,eACF7C,OAAA,CAACT,SAAS;UACN0D,KAAK,EAAC,SAAS;UACfV,OAAO,EAAC,UAAU;UAClBW,KAAK,EAAEzC,MAAO;UACd0C,QAAQ,EAAGC,CAAC,IAAK1C,SAAS,CAAC0C,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;UAC3CI,QAAQ,EAAEjD,SAAU;UACpBmD,QAAQ;UACRxB,KAAK,EAAE,CAACvB,MAAO;UACfgD,UAAU,EAAE,CAAChD,MAAM,GAAG,qBAAqB,GAAG,EAAG;UACjDiD,SAAS;QAAA;UAAAhB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACZ,CAAC,eACF7C,OAAA,CAACT,SAAS;UACN0D,KAAK,EAAC,aAAa;UACnBV,OAAO,EAAC,UAAU;UAClBW,KAAK,EAAEvC,UAAW;UAClBwC,QAAQ,EAAGC,CAAC,IAAKxC,aAAa,CAACwC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;UAC/CI,QAAQ,EAAEjD,SAAU;UACpBmD,QAAQ;UACRxB,KAAK,EAAE,CAACrB,UAAW;UACnB8C,UAAU,EAAE,CAAC9C,UAAU,GAAG,yBAAyB,GAAG,EAAG;UACzD+C,SAAS;QAAA;UAAAhB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACZ,CAAC,eAEF7C,OAAA,CAACR,MAAM;UACH+C,OAAO,EAAC,WAAW;UACnBoB,OAAO,EAAE3C,WAAY;UACrBsC,QAAQ,EAAEjD,SAAS,IAAI,CAACE,MAAM,IAAI,CAACE,MAAM,IAAI,CAACE,UAAU,IAAI,CAACE,cAAe;UAC5E6C,SAAS;UAAApB,QAAA,EAERjC,SAAS,gBAAGL,OAAA,CAACH,gBAAgB;YAAC+D,IAAI,EAAE;UAAG;YAAAlB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,GAAG;QAAO;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjD,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACR,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACG;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACZ,CAAC;AAEf;AAACzC,EAAA,CAxIQH,KAAK;EAAA,QAMOH,WAAW;AAAA;AAAA+D,EAAA,GANvB5D,KAAK;AA0Id,eAAeA,KAAK;AAAC,IAAA4D,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}