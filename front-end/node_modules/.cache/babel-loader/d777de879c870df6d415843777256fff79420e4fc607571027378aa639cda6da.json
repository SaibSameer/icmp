{"ast":null,"code":"var _s = $RefreshSig$();\n// src/hooks/useConfig.js\nimport { useState, useEffect, useCallback } from 'react';\nimport { API_CONFIG, AUTH_CONFIG } from '../config';\n\n// Normalize UUID to ensure it passes backend validation\nexport const normalizeUUID = uuid => {\n  if (!uuid) return null;\n  try {\n    // Convert to lowercase and trim whitespace\n    const normalizedUUID = uuid.toLowerCase().trim();\n    // Check if it's a valid UUID format\n    const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;\n    if (uuidRegex.test(normalizedUUID)) {\n      return normalizedUUID;\n    }\n    console.warn('Invalid UUID format:', uuid);\n    return uuid; // Return original if not matching pattern\n  } catch (error) {\n    console.error('Error normalizing UUID:', error);\n    return uuid; // Return original on error\n  }\n};\nconst useConfig = () => {\n  _s();\n  // API keys should not be stored in localStorage. Initialize as empty.\n  // They will be handled via httpOnly cookies set by the backend.\n  const [apiKey, setApiKey] = useState('');\n  const [userId, setUserId] = useState(localStorage.getItem('userId') || '');\n  const [businessId, setBusinessId] = useState(localStorage.getItem('businessId') || '');\n  // Business API key should also not be stored in localStorage.\n  const [businessApiKey, setBusinessApiKey] = useState('');\n\n  // No need to memoize simple setters like this unless performance profiling proves it necessary.\n  // const memoizedSetApiKey = useCallback((newApiKey) => {\n  //     setApiKey(newApiKey);\n  // }, []);\n\n  // Persist userId and businessId to localStorage when they change\n  useEffect(() => {\n    localStorage.setItem('userId', userId);\n  }, [userId]);\n  useEffect(() => {\n    localStorage.setItem('businessId', businessId);\n  }, [businessId]);\n  return {\n    apiKey,\n    setApiKey,\n    // Return the direct setter\n    userId,\n    setUserId,\n    businessId,\n    setBusinessId,\n    businessApiKey,\n    setBusinessApiKey // Return the direct setter\n  };\n};\n_s(useConfig, \"1Hnvh+Ir06tyfLvfJAMlAd/edXs=\");\nexport default useConfig;","map":{"version":3,"names":["useState","useEffect","useCallback","API_CONFIG","AUTH_CONFIG","normalizeUUID","uuid","normalizedUUID","toLowerCase","trim","uuidRegex","test","console","warn","error","useConfig","_s","apiKey","setApiKey","userId","setUserId","localStorage","getItem","businessId","setBusinessId","businessApiKey","setBusinessApiKey","setItem"],"sources":["C:/icmp_events_api/front-end/src/hooks/useConfig.js"],"sourcesContent":["// src/hooks/useConfig.js\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { API_CONFIG, AUTH_CONFIG } from '../config';\r\n\r\n// Normalize UUID to ensure it passes backend validation\r\nexport const normalizeUUID = (uuid) => {\r\n  if (!uuid) return null;\r\n  \r\n  try {\r\n    // Convert to lowercase and trim whitespace\r\n    const normalizedUUID = uuid.toLowerCase().trim();\r\n    // Check if it's a valid UUID format\r\n    const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;\r\n    \r\n    if (uuidRegex.test(normalizedUUID)) {\r\n      return normalizedUUID;\r\n    }\r\n    console.warn('Invalid UUID format:', uuid);\r\n    return uuid; // Return original if not matching pattern\r\n  } catch (error) {\r\n    console.error('Error normalizing UUID:', error);\r\n    return uuid; // Return original on error\r\n  }\r\n};\r\n\r\nconst useConfig = () => {\r\n    // API keys should not be stored in localStorage. Initialize as empty.\r\n    // They will be handled via httpOnly cookies set by the backend.\r\n    const [apiKey, setApiKey] = useState(''); \r\n    const [userId, setUserId] = useState(localStorage.getItem('userId') || '');\r\n    const [businessId, setBusinessId] = useState(localStorage.getItem('businessId') || '');\r\n    // Business API key should also not be stored in localStorage.\r\n    const [businessApiKey, setBusinessApiKey] = useState(''); \r\n\r\n    // No need to memoize simple setters like this unless performance profiling proves it necessary.\r\n    // const memoizedSetApiKey = useCallback((newApiKey) => {\r\n    //     setApiKey(newApiKey);\r\n    // }, []);\r\n\r\n    // Persist userId and businessId to localStorage when they change\r\n    useEffect(() => {\r\n        localStorage.setItem('userId', userId);\r\n    }, [userId]);\r\n\r\n    useEffect(() => {\r\n        localStorage.setItem('businessId', businessId);\r\n    }, [businessId]);\r\n\r\n    return {\r\n        apiKey,\r\n        setApiKey, // Return the direct setter\r\n        userId,\r\n        setUserId,\r\n        businessId,\r\n        setBusinessId,\r\n        businessApiKey,\r\n        setBusinessApiKey, // Return the direct setter\r\n    };\r\n};\r\n\r\nexport default useConfig;"],"mappings":";AAAA;AACA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;AACxD,SAASC,UAAU,EAAEC,WAAW,QAAQ,WAAW;;AAEnD;AACA,OAAO,MAAMC,aAAa,GAAIC,IAAI,IAAK;EACrC,IAAI,CAACA,IAAI,EAAE,OAAO,IAAI;EAEtB,IAAI;IACF;IACA,MAAMC,cAAc,GAAGD,IAAI,CAACE,WAAW,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC;IAChD;IACA,MAAMC,SAAS,GAAG,gEAAgE;IAElF,IAAIA,SAAS,CAACC,IAAI,CAACJ,cAAc,CAAC,EAAE;MAClC,OAAOA,cAAc;IACvB;IACAK,OAAO,CAACC,IAAI,CAAC,sBAAsB,EAAEP,IAAI,CAAC;IAC1C,OAAOA,IAAI,CAAC,CAAC;EACf,CAAC,CAAC,OAAOQ,KAAK,EAAE;IACdF,OAAO,CAACE,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;IAC/C,OAAOR,IAAI,CAAC,CAAC;EACf;AACF,CAAC;AAED,MAAMS,SAAS,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACpB;EACA;EACA,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGlB,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACmB,MAAM,EAAEC,SAAS,CAAC,GAAGpB,QAAQ,CAACqB,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;EAC1E,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGxB,QAAQ,CAACqB,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;EACtF;EACA,MAAM,CAACG,cAAc,EAAEC,iBAAiB,CAAC,GAAG1B,QAAQ,CAAC,EAAE,CAAC;;EAExD;EACA;EACA;EACA;;EAEA;EACAC,SAAS,CAAC,MAAM;IACZoB,YAAY,CAACM,OAAO,CAAC,QAAQ,EAAER,MAAM,CAAC;EAC1C,CAAC,EAAE,CAACA,MAAM,CAAC,CAAC;EAEZlB,SAAS,CAAC,MAAM;IACZoB,YAAY,CAACM,OAAO,CAAC,YAAY,EAAEJ,UAAU,CAAC;EAClD,CAAC,EAAE,CAACA,UAAU,CAAC,CAAC;EAEhB,OAAO;IACHN,MAAM;IACNC,SAAS;IAAE;IACXC,MAAM;IACNC,SAAS;IACTG,UAAU;IACVC,aAAa;IACbC,cAAc;IACdC,iBAAiB,CAAE;EACvB,CAAC;AACL,CAAC;AAACV,EAAA,CAjCID,SAAS;AAmCf,eAAeA,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}