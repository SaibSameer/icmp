{"ast":null,"code":"var _jsxFileName = \"C:\\\\icmp_events_api\\\\front-end\\\\src\\\\components\\\\BusinessDetailsView\\\\BusinessDetailsView.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport AgentSection from '../AgentSection';\nimport { Snackbar, Alert, Box, IconButton, Typography, Container, Paper, Button, TextField, List, ListItem, ListItemText, ListItemSecondaryAction, Dialog, DialogTitle, DialogContent, DialogActions } from '@mui/material';\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\nimport EditIcon from '@mui/icons-material/Edit';\nimport DescriptionIcon from '@mui/icons-material/Description';\nimport LogoutIcon from '@mui/icons-material/Logout';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport AddIcon from '@mui/icons-material/Add';\n\n// Define your backend API base URL\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = 'http://localhost:5000';\nfunction BusinessDetailsView() {\n  _s();\n  const navigate = useNavigate();\n  const [businessData, setBusinessData] = useState(null);\n  const [editFormData, setEditFormData] = useState({}); // State for form data\n  const [agents, setAgents] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [isEditing, setIsEditing] = useState(false);\n  const [snackbar, setSnackbar] = useState({\n    open: false,\n    message: '',\n    severity: 'success'\n  });\n  const [isEditingAgent, setIsEditingAgent] = useState(false);\n  const [editingAgent, setEditingAgent] = useState(null);\n  const [newAgentData, setNewAgentData] = useState({\n    agent_name: '',\n    agent_description: ''\n  });\n\n  // Get the business ID from localStorage instead of hardcoding\n  const businessId = localStorage.getItem('businessId');\n  const handleSnackbarOpen = (message, severity = 'success') => {\n    setSnackbar({\n      open: true,\n      message,\n      severity\n    });\n  };\n  const handleSnackbarClose = () => {\n    setSnackbar({\n      ...snackbar,\n      open: false\n    });\n  };\n  const handleNavigateToLogin = () => {\n    navigate('/login');\n  };\n  const handleLogout = () => {\n    // Clear localStorage\n    localStorage.removeItem('userId');\n    localStorage.removeItem('businessId');\n    localStorage.removeItem('businessApiKey');\n\n    // Show logout message\n    handleSnackbarOpen('Logged out successfully', 'success');\n\n    // Navigate to login page\n    navigate('/login');\n  };\n\n  // Navigate to stage management for a specific agent\n  const navigateToStageManagement = (agentId, agentName) => {\n    console.log(`Navigating to stage management for agent: ${agentName} (${agentId})`);\n\n    // Store agent ID in localStorage for persistence\n    localStorage.setItem('agentId', agentId);\n\n    // Navigate to stage management with proper URL format\n    navigate(`/stage-management/business_id=${businessId}/agent_id=${agentId}`);\n  };\n\n  // Handle edit agent\n  const handleEditAgent = agent => {\n    setEditingAgent(agent);\n    setIsEditingAgent(true);\n  };\n\n  // Handle delete agent\n  const handleDeleteAgent = async agentId => {\n    if (!window.confirm('Are you sure you want to delete this agent?')) {\n      return;\n    }\n    setIsLoading(true);\n    try {\n      const response = await fetch(`${API_BASE_URL}/agents/${agentId}?business_id=${businessId}`, {\n        method: 'DELETE',\n        credentials: 'include',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          business_id: businessId\n        })\n      });\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(`HTTP error ${response.status}: ${errorData.message || 'Failed to delete agent'}`);\n      }\n\n      // Refresh the agents list\n      fetchAgents();\n      handleSnackbarOpen('Agent deleted successfully', 'success');\n    } catch (error) {\n      console.error('Error deleting agent:', error);\n      handleSnackbarOpen(`Error: ${error.message}`, 'error');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Fetch business data\n  useEffect(() => {\n    const fetchData = async () => {\n      if (!businessId) {\n        setError(\"Please login to view business details.\");\n        setIsLoading(false);\n        return;\n      }\n      setIsLoading(true);\n      setError(null); // Clear previous errors\n      console.log(`Fetching data for business ID: ${businessId}`);\n      try {\n        // --- Fetch Business Details ---\n        const businessResponse = await fetch(`/businesses/${businessId}`, {\n          method: 'GET',\n          credentials: 'include',\n          // Important to send cookies\n          headers: {\n            'Accept': 'application/json'\n          }\n        });\n        if (!businessResponse.ok) {\n          const errorData = await businessResponse.json();\n          throw new Error(errorData.message || 'Failed to fetch business details');\n        }\n        const businessData = await businessResponse.json();\n        console.log('Fetched business data:', businessData);\n        setBusinessData(businessData);\n        setEditFormData(businessData); // Initialize form data with current values\n\n        // After business data is fetched, fetch agents\n        fetchAgents();\n      } catch (err) {\n        console.error('Error fetching business data:', err);\n        setError(err.message);\n        setIsLoading(false);\n      }\n    };\n    fetchData();\n  }, [businessId]);\n\n  // Fetch agents for the business\n  const fetchAgents = async () => {\n    try {\n      const response = await fetch(`/agents?business_id=${businessId}`, {\n        method: 'GET',\n        credentials: 'include',\n        headers: {\n          'Accept': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        throw new Error('Failed to fetch agents');\n      }\n      const data = await response.json();\n      console.log('Fetched agents:', data);\n      setAgents(data || []);\n    } catch (error) {\n      console.error('Error fetching agents:', error);\n      handleSnackbarOpen(`Error fetching agents: ${error.message}`, 'error');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setEditFormData(prevData => ({\n      ...prevData,\n      [name]: value\n    }));\n  };\n  const handleEditToggle = () => {\n    if (!isEditing && businessData) {\n      // Reset form data to current business data when entering edit mode\n      setEditFormData({\n        business_name: businessData.business_name || '',\n        business_description: businessData.business_description || '',\n        address: businessData.address || '',\n        phone_number: businessData.phone_number || '',\n        website: businessData.website || ''\n      });\n    }\n    setIsEditing(!isEditing);\n    setError(null); // Clear errors when toggling mode\n  };\n  const handleSaveChanges = async e => {\n    e.preventDefault(); // Prevent default form submission\n    setIsLoading(true); // Indicate saving process\n    setError(null);\n    console.log(\"Saving changes:\", editFormData);\n    try {\n      const response = await fetch(`/businesses/${businessId}`, {\n        method: 'PUT',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify(editFormData)\n      });\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(`Error: ${errorData.error || errorData.message || 'Failed to save changes'}`);\n      }\n      const result = await response.json();\n      console.log(\"Save successful:\", result);\n\n      // Update the business data with the new values\n      setBusinessData(prevData => ({\n        ...prevData,\n        ...editFormData\n      }));\n\n      // Exit edit mode\n      setIsEditing(false);\n\n      // Show success message\n      handleSnackbarOpen('Business details updated successfully', 'success');\n    } catch (err) {\n      console.error(\"Error saving changes:\", err);\n      setError(err.message || \"An unexpected error occurred while saving.\");\n      handleSnackbarOpen(err.message || \"Failed to save changes\", 'error');\n    } finally {\n      setIsLoading(false); // Finish loading indicator\n    }\n  };\n  if (isLoading && !businessData) {\n    // Show initial loading\n    return /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"lg\",\n      sx: {\n        mt: 4,\n        mb: 4\n      },\n      children: /*#__PURE__*/_jsxDEV(Paper, {\n        sx: {\n          p: 3,\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center'\n        },\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          children: \"Loading business details...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Show error prominently if one occurred\n  if (error && !isEditing) {\n    // Don't block editing form with load errors\n    return /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"lg\",\n      sx: {\n        mt: 4,\n        mb: 4\n      },\n      children: /*#__PURE__*/_jsxDEV(Paper, {\n        sx: {\n          p: 3\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          color: \"error\",\n          children: [\"Error: \", error]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: handleNavigateToLogin,\n          sx: {\n            mt: 2\n          },\n          children: \"Return to Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 7\n    }, this);\n  }\n  if (!businessData && !isLoading) {\n    // Handle case where loading finished but no data (and no specific load error)\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"No business data found or failed to load.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 14\n    }, this);\n  }\n  // Render component content only if businessData is available\n  if (!businessData) return null; // Or a placeholder/skeleton UI\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"lg\",\n    sx: {\n      mt: 4,\n      mb: 4\n    },\n    children: /*#__PURE__*/_jsxDEV(Paper, {\n      sx: {\n        p: 3,\n        mb: 4\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          alignItems: 'center',\n          mb: 3\n        },\n        children: [/*#__PURE__*/_jsxDEV(IconButton, {\n          onClick: handleLogout,\n          sx: {\n            mr: 1\n          },\n          children: /*#__PURE__*/_jsxDEV(ArrowBackIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          gutterBottom: true,\n          sx: {\n            flexGrow: 1,\n            mb: 0\n          },\n          children: \"Business Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 9\n      }, this), isEditing && error && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: 'red',\n          marginBottom: '10px'\n        },\n        children: [\"Save Error: \", error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 32\n      }, this), isEditing && isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Saving...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 36\n      }, this), isEditing ?\n      /*#__PURE__*/\n      // --- Edit Mode ---\n      _jsxDEV(\"form\", {\n        onSubmit: handleSaveChanges,\n        children: /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            flexDirection: 'column',\n            gap: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            id: \"business_name\",\n            name: \"business_name\",\n            label: \"Business Name\",\n            value: editFormData.business_name,\n            onChange: handleInputChange,\n            required: true,\n            fullWidth: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            id: \"business_description\",\n            name: \"business_description\",\n            label: \"Description\",\n            value: editFormData.business_description,\n            onChange: handleInputChange,\n            multiline: true,\n            rows: 4,\n            fullWidth: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            id: \"address\",\n            name: \"address\",\n            label: \"Address\",\n            value: editFormData.address,\n            onChange: handleInputChange,\n            fullWidth: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            id: \"phone_number\",\n            name: \"phone_number\",\n            label: \"Phone\",\n            value: editFormData.phone_number,\n            onChange: handleInputChange,\n            fullWidth: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            id: \"website\",\n            name: \"website\",\n            label: \"Website\",\n            value: editFormData.website,\n            onChange: handleInputChange,\n            fullWidth: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              gap: 2,\n              mt: 2,\n              justifyContent: 'flex-end'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              type: \"button\",\n              variant: \"outlined\",\n              onClick: handleEditToggle,\n              disabled: isLoading,\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              type: \"submit\",\n              variant: \"contained\",\n              color: \"primary\",\n              disabled: isLoading,\n              children: isLoading ? 'Saving...' : 'Save Changes'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 376,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 11\n      }, this) :\n      /*#__PURE__*/\n      // --- View Mode ---\n      _jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Name:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 16\n          }, this), \" \", businessData.business_name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Description:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 16\n          }, this), \" \", businessData.business_description || '-']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Address:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 16\n          }, this), \" \", businessData.address || '-']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Phone:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 16\n          }, this), \" \", businessData.phone_number || '-']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Website:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 16\n          }, this), \" \", businessData.website ? /*#__PURE__*/_jsxDEV(\"a\", {\n            href: businessData.website,\n            target: \"_blank\",\n            rel: \"noopener noreferrer\",\n            children: businessData.website\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 66\n          }, this) : '-']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Business ID:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 16\n          }, this), \" \", businessData.business_id]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Owner ID:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 16\n          }, this), \" \", businessData.owner_id]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            gap: 2,\n            mt: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            color: \"primary\",\n            onClick: () => setIsEditing(true),\n            startIcon: /*#__PURE__*/_jsxDEV(EditIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 28\n            }, this),\n            sx: {\n              mr: 1\n            },\n            children: \"Edit Details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outlined\",\n            color: \"secondary\",\n            onClick: () => navigate('/templates'),\n            startIcon: /*#__PURE__*/_jsxDEV(DescriptionIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 28\n            }, this),\n            children: \"Manage Templates\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outlined\",\n            color: \"error\",\n            onClick: handleLogout,\n            startIcon: /*#__PURE__*/_jsxDEV(LogoutIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 420,\n              columnNumber: 28\n            }, this),\n            sx: {\n              ml: 'auto'\n            },\n            children: \"Logout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 416,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        gutterBottom: true,\n        children: \"Agents\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          mb: 2\n        },\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: () => {\n            setEditingAgent(null);\n            setNewAgentData({\n              agent_name: '',\n              agent_description: ''\n            });\n            setIsEditingAgent(true);\n          },\n          startIcon: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 447,\n            columnNumber: 24\n          }, this),\n          children: \"Add Agent\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 436,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 9\n      }, this), agents.length === 0 ? /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body1\",\n        children: \"No agents found.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(List, {\n        children: agents.map(agent => /*#__PURE__*/_jsxDEV(ListItem, {\n          onClick: () => navigateToStageManagement(agent.agent_id, agent.agent_name),\n          sx: {\n            cursor: 'pointer',\n            border: '1px solid #e0e0e0',\n            borderRadius: 1,\n            mb: 1,\n            '&:hover': {\n              backgroundColor: '#f5f5f5'\n            }\n          },\n          children: [/*#__PURE__*/_jsxDEV(ListItemText, {\n            primary: agent.agent_name,\n            secondary: /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                component: \"span\",\n                variant: \"body2\",\n                color: \"text.primary\",\n                children: agent.agent_description || 'No description'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 473,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                component: \"div\",\n                variant: \"caption\",\n                color: \"text.secondary\",\n                children: [\"Agent ID: \", agent.agent_id]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 476,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 469,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(ListItemSecondaryAction, {\n            children: [/*#__PURE__*/_jsxDEV(IconButton, {\n              edge: \"end\",\n              \"aria-label\": \"edit\",\n              onClick: e => {\n                e.stopPropagation();\n                handleEditAgent(agent);\n              },\n              children: /*#__PURE__*/_jsxDEV(EditIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 487,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 483,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n              edge: \"end\",\n              \"aria-label\": \"delete\",\n              onClick: e => {\n                e.stopPropagation();\n                handleDeleteAgent(agent.agent_id);\n              },\n              children: /*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 493,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 489,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 482,\n            columnNumber: 17\n          }, this)]\n        }, agent.agent_id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n        open: isEditingAgent,\n        onClose: () => setIsEditingAgent(false),\n        maxWidth: \"sm\",\n        fullWidth: true,\n        children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n          children: editingAgent ? 'Edit Agent' : 'Create New Agent'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 503,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            autoFocus: true,\n            margin: \"dense\",\n            id: \"agent_name\",\n            label: \"Agent Name\",\n            type: \"text\",\n            fullWidth: true,\n            value: editingAgent ? editingAgent.agent_name : newAgentData.agent_name,\n            onChange: e => {\n              if (editingAgent) {\n                setEditingAgent({\n                  ...editingAgent,\n                  agent_name: e.target.value\n                });\n              } else {\n                setNewAgentData({\n                  ...newAgentData,\n                  agent_name: e.target.value\n                });\n              }\n            },\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 505,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            margin: \"dense\",\n            id: \"agent_description\",\n            label: \"Description\",\n            type: \"text\",\n            fullWidth: true,\n            multiline: true,\n            rows: 4,\n            value: editingAgent ? editingAgent.agent_description : newAgentData.agent_description,\n            onChange: e => {\n              if (editingAgent) {\n                setEditingAgent({\n                  ...editingAgent,\n                  agent_description: e.target.value\n                });\n              } else {\n                setNewAgentData({\n                  ...newAgentData,\n                  agent_description: e.target.value\n                });\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 528,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 504,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => setIsEditingAgent(false),\n            color: \"primary\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 553,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: async () => {\n              try {\n                const agentData = editingAgent ? editingAgent : newAgentData;\n                if (!agentData.agent_name) {\n                  handleSnackbarOpen('Agent name is required', 'error');\n                  return;\n                }\n                const url = editingAgent ? `/agents/${editingAgent.agent_id}` : '/agents';\n                const method = editingAgent ? 'PUT' : 'POST';\n                const requestBody = {\n                  ...agentData,\n                  business_id: businessId\n                };\n                const response = await fetch(url, {\n                  method,\n                  headers: {\n                    'Content-Type': 'application/json',\n                    'Accept': 'application/json'\n                  },\n                  credentials: 'include',\n                  body: JSON.stringify(requestBody)\n                });\n                if (!response.ok) {\n                  throw new Error('Failed to save agent');\n                }\n                handleSnackbarOpen(editingAgent ? 'Agent updated successfully' : 'Agent created successfully', 'success');\n                setIsEditingAgent(false);\n                fetchAgents();\n              } catch (error) {\n                console.error('Error saving agent:', error);\n                handleSnackbarOpen(`Error: ${error.message}`, 'error');\n              }\n            },\n            color: \"primary\",\n            variant: \"contained\",\n            children: editingAgent ? 'Update' : 'Create'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 556,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 552,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 502,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n        open: snackbar.open,\n        autoHideDuration: 6000,\n        onClose: handleSnackbarClose,\n        anchorOrigin: {\n          vertical: 'top',\n          horizontal: 'right'\n        },\n        children: /*#__PURE__*/_jsxDEV(Alert, {\n          onClose: handleSnackbarClose,\n          severity: snackbar.severity,\n          sx: {\n            width: '100%'\n          },\n          children: snackbar.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 618,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 612,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 304,\n    columnNumber: 5\n  }, this);\n}\n_s(BusinessDetailsView, \"oBxa7Ws+DIexInacTo4bQC2cO6I=\", false, function () {\n  return [useNavigate];\n});\n_c = BusinessDetailsView;\nexport default BusinessDetailsView;\nvar _c;\n$RefreshReg$(_c, \"BusinessDetailsView\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","AgentSection","Snackbar","Alert","Box","IconButton","Typography","Container","Paper","Button","TextField","List","ListItem","ListItemText","ListItemSecondaryAction","Dialog","DialogTitle","DialogContent","DialogActions","ArrowBackIcon","EditIcon","DescriptionIcon","LogoutIcon","DeleteIcon","AddIcon","jsxDEV","_jsxDEV","Fragment","_Fragment","API_BASE_URL","BusinessDetailsView","_s","navigate","businessData","setBusinessData","editFormData","setEditFormData","agents","setAgents","isLoading","setIsLoading","error","setError","isEditing","setIsEditing","snackbar","setSnackbar","open","message","severity","isEditingAgent","setIsEditingAgent","editingAgent","setEditingAgent","newAgentData","setNewAgentData","agent_name","agent_description","businessId","localStorage","getItem","handleSnackbarOpen","handleSnackbarClose","handleNavigateToLogin","handleLogout","removeItem","navigateToStageManagement","agentId","agentName","console","log","setItem","handleEditAgent","agent","handleDeleteAgent","window","confirm","response","fetch","method","credentials","headers","body","JSON","stringify","business_id","ok","errorData","json","catch","Error","status","fetchAgents","fetchData","businessResponse","err","data","handleInputChange","e","name","value","target","prevData","handleEditToggle","business_name","business_description","address","phone_number","website","handleSaveChanges","preventDefault","result","maxWidth","sx","mt","mb","children","p","display","justifyContent","alignItems","fileName","_jsxFileName","lineNumber","columnNumber","color","variant","onClick","mr","gutterBottom","flexGrow","style","marginBottom","onSubmit","flexDirection","gap","id","label","onChange","required","fullWidth","multiline","rows","type","disabled","href","rel","owner_id","startIcon","ml","length","map","agent_id","cursor","border","borderRadius","backgroundColor","primary","secondary","component","edge","stopPropagation","onClose","autoFocus","margin","agentData","url","requestBody","autoHideDuration","anchorOrigin","vertical","horizontal","width","_c","$RefreshReg$"],"sources":["C:/icmp_events_api/front-end/src/components/BusinessDetailsView/BusinessDetailsView.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport AgentSection from '../AgentSection';\r\nimport { \r\n  Snackbar, \r\n  Alert, \r\n  Box, \r\n  IconButton, \r\n  Typography, \r\n  Container, \r\n  Paper,\r\n  Button,\r\n  TextField,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  ListItemSecondaryAction,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions\r\n} from '@mui/material';\r\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\r\nimport EditIcon from '@mui/icons-material/Edit';\r\nimport DescriptionIcon from '@mui/icons-material/Description';\r\nimport LogoutIcon from '@mui/icons-material/Logout';\r\nimport DeleteIcon from '@mui/icons-material/Delete';\r\nimport AddIcon from '@mui/icons-material/Add';\r\n\r\n// Define your backend API base URL\r\nconst API_BASE_URL = 'http://localhost:5000';\r\n\r\nfunction BusinessDetailsView() {\r\n  const navigate = useNavigate();\r\n  const [businessData, setBusinessData] = useState(null);\r\n  const [editFormData, setEditFormData] = useState({}); // State for form data\r\n  const [agents, setAgents] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [snackbar, setSnackbar] = useState({ open: false, message: '', severity: 'success' });\r\n  const [isEditingAgent, setIsEditingAgent] = useState(false);\r\n  const [editingAgent, setEditingAgent] = useState(null);\r\n  const [newAgentData, setNewAgentData] = useState({\r\n    agent_name: '',\r\n    agent_description: ''\r\n  });\r\n\r\n  // Get the business ID from localStorage instead of hardcoding\r\n  const businessId = localStorage.getItem('businessId');\r\n\r\n  const handleSnackbarOpen = (message, severity = 'success') => {\r\n    setSnackbar({\r\n      open: true,\r\n      message,\r\n      severity\r\n    });\r\n  };\r\n\r\n  const handleSnackbarClose = () => {\r\n    setSnackbar({ ...snackbar, open: false });\r\n  };\r\n\r\n  const handleNavigateToLogin = () => {\r\n    navigate('/login');\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    // Clear localStorage\r\n    localStorage.removeItem('userId');\r\n    localStorage.removeItem('businessId');\r\n    localStorage.removeItem('businessApiKey');\r\n    \r\n    // Show logout message\r\n    handleSnackbarOpen('Logged out successfully', 'success');\r\n    \r\n    // Navigate to login page\r\n    navigate('/login');\r\n  };\r\n\r\n  // Navigate to stage management for a specific agent\r\n  const navigateToStageManagement = (agentId, agentName) => {\r\n    console.log(`Navigating to stage management for agent: ${agentName} (${agentId})`);\r\n    \r\n    // Store agent ID in localStorage for persistence\r\n    localStorage.setItem('agentId', agentId);\r\n    \r\n    // Navigate to stage management with proper URL format\r\n    navigate(`/stage-management/business_id=${businessId}/agent_id=${agentId}`);\r\n  };\r\n\r\n  // Handle edit agent\r\n  const handleEditAgent = (agent) => {\r\n    setEditingAgent(agent);\r\n    setIsEditingAgent(true);\r\n  };\r\n\r\n  // Handle delete agent\r\n  const handleDeleteAgent = async (agentId) => {\r\n    if (!window.confirm('Are you sure you want to delete this agent?')) {\r\n      return;\r\n    }\r\n    \r\n    setIsLoading(true);\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/agents/${agentId}?business_id=${businessId}`, {\r\n        method: 'DELETE',\r\n        credentials: 'include',\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({ business_id: businessId })\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        const errorData = await response.json().catch(() => ({}));\r\n        throw new Error(`HTTP error ${response.status}: ${errorData.message || 'Failed to delete agent'}`);\r\n      }\r\n      \r\n      // Refresh the agents list\r\n      fetchAgents();\r\n      handleSnackbarOpen('Agent deleted successfully', 'success');\r\n    } catch (error) {\r\n      console.error('Error deleting agent:', error);\r\n      handleSnackbarOpen(`Error: ${error.message}`, 'error');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Fetch business data\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      if (!businessId) {\r\n          setError(\"Please login to view business details.\");\r\n          setIsLoading(false);\r\n          return;\r\n      }\r\n      setIsLoading(true);\r\n      setError(null); // Clear previous errors\r\n      console.log(`Fetching data for business ID: ${businessId}`);\r\n\r\n      try {\r\n        // --- Fetch Business Details ---\r\n        const businessResponse = await fetch(`/businesses/${businessId}`, {\r\n          method: 'GET',\r\n          credentials: 'include', // Important to send cookies\r\n          headers: {\r\n            'Accept': 'application/json',\r\n          },\r\n        });\r\n\r\n        if (!businessResponse.ok) {\r\n          const errorData = await businessResponse.json();\r\n          throw new Error(errorData.message || 'Failed to fetch business details');\r\n        }\r\n\r\n        const businessData = await businessResponse.json();\r\n        console.log('Fetched business data:', businessData);\r\n        setBusinessData(businessData);\r\n        setEditFormData(businessData); // Initialize form data with current values\r\n        \r\n        // After business data is fetched, fetch agents\r\n        fetchAgents();\r\n      } catch (err) {\r\n        console.error('Error fetching business data:', err);\r\n        setError(err.message);\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [businessId]);\r\n  \r\n  // Fetch agents for the business\r\n  const fetchAgents = async () => {\r\n    try {\r\n      const response = await fetch(`/agents?business_id=${businessId}`, {\r\n        method: 'GET',\r\n        credentials: 'include',\r\n        headers: {\r\n          'Accept': 'application/json',\r\n        },\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        throw new Error('Failed to fetch agents');\r\n      }\r\n      \r\n      const data = await response.json();\r\n      console.log('Fetched agents:', data);\r\n      setAgents(data || []);\r\n    } catch (error) {\r\n      console.error('Error fetching agents:', error);\r\n      handleSnackbarOpen(`Error fetching agents: ${error.message}`, 'error');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (e) => {\r\n      const { name, value } = e.target;\r\n      setEditFormData(prevData => ({\r\n          ...prevData,\r\n          [name]: value\r\n      }));\r\n  };\r\n\r\n  const handleEditToggle = () => {\r\n      if (!isEditing && businessData) {\r\n          // Reset form data to current business data when entering edit mode\r\n          setEditFormData({\r\n              business_name: businessData.business_name || '',\r\n              business_description: businessData.business_description || '',\r\n              address: businessData.address || '',\r\n              phone_number: businessData.phone_number || '',\r\n              website: businessData.website || ''\r\n          });\r\n      }\r\n      setIsEditing(!isEditing);\r\n      setError(null); // Clear errors when toggling mode\r\n  };\r\n\r\n  const handleSaveChanges = async (e) => {\r\n      e.preventDefault(); // Prevent default form submission\r\n      setIsLoading(true); // Indicate saving process\r\n      setError(null);\r\n      console.log(\"Saving changes:\", editFormData);\r\n\r\n      try {\r\n           const response = await fetch(`/businesses/${businessId}`, {\r\n               method: 'PUT',\r\n               credentials: 'include',\r\n               headers: {\r\n                   'Content-Type': 'application/json',\r\n                   'Accept': 'application/json',\r\n               },\r\n               body: JSON.stringify(editFormData)\r\n           });\r\n\r\n           if (!response.ok) {\r\n                const errorData = await response.json().catch(() => ({}));\r\n                throw new Error(`Error: ${errorData.error || errorData.message || 'Failed to save changes'}`);\r\n           }\r\n\r\n           const result = await response.json();\r\n           console.log(\"Save successful:\", result);\r\n\r\n           // Update the business data with the new values\r\n           setBusinessData(prevData => ({ ...prevData, ...editFormData }));\r\n           \r\n           // Exit edit mode\r\n           setIsEditing(false);\r\n           \r\n           // Show success message\r\n           handleSnackbarOpen('Business details updated successfully', 'success');\r\n\r\n      } catch (err) {\r\n          console.error(\"Error saving changes:\", err);\r\n          setError(err.message || \"An unexpected error occurred while saving.\");\r\n          handleSnackbarOpen(err.message || \"Failed to save changes\", 'error');\r\n      } finally {\r\n          setIsLoading(false); // Finish loading indicator\r\n      }\r\n  };\r\n\r\n  if (isLoading && !businessData) { // Show initial loading\r\n    return (\r\n      <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4 }}>\r\n        <Paper sx={{ p: 3, display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\r\n          <Typography>Loading business details...</Typography>\r\n        </Paper>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  // Show error prominently if one occurred\r\n  if (error && !isEditing) { // Don't block editing form with load errors\r\n    return (\r\n      <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4 }}>\r\n        <Paper sx={{ p: 3 }}>\r\n          <Typography color=\"error\">Error: {error}</Typography>\r\n          <Button \r\n            variant=\"contained\" \r\n            color=\"primary\" \r\n            onClick={handleNavigateToLogin} \r\n            sx={{ mt: 2 }}\r\n          >\r\n            Return to Login\r\n          </Button>\r\n        </Paper>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  if (!businessData && !isLoading) { // Handle case where loading finished but no data (and no specific load error)\r\n      return <div>No business data found or failed to load.</div>;\r\n  }\r\n  // Render component content only if businessData is available\r\n  if (!businessData) return null; // Or a placeholder/skeleton UI\r\n\r\n  return (\r\n    <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4 }}>\r\n      <Paper sx={{ p: 3, mb: 4 }}>\r\n        <Box sx={{ display: 'flex', alignItems: 'center', mb: 3 }}>\r\n          <IconButton onClick={handleLogout} sx={{ mr: 1 }}>\r\n            <ArrowBackIcon />\r\n          </IconButton>\r\n          <Typography variant=\"h5\" gutterBottom sx={{ flexGrow: 1, mb: 0 }}>\r\n            Business Details\r\n          </Typography>\r\n        </Box>\r\n        \r\n        {/* Display save errors specifically above the form */}\r\n        {isEditing && error && <div style={{ color: 'red', marginBottom: '10px' }}>Save Error: {error}</div>}\r\n        {/* Indicate loading state during save */}\r\n        {isEditing && isLoading && <div>Saving...</div>}\r\n\r\n        {isEditing ? (\r\n          // --- Edit Mode ---\r\n          <form onSubmit={handleSaveChanges}>\r\n              <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2 }}>\r\n                  <TextField\r\n                      id=\"business_name\"\r\n                      name=\"business_name\"\r\n                      label=\"Business Name\"\r\n                      value={editFormData.business_name}\r\n                      onChange={handleInputChange}\r\n                      required\r\n                      fullWidth\r\n                  />\r\n                  <TextField\r\n                      id=\"business_description\"\r\n                      name=\"business_description\"\r\n                      label=\"Description\"\r\n                      value={editFormData.business_description}\r\n                      onChange={handleInputChange}\r\n                      multiline\r\n                      rows={4}\r\n                      fullWidth\r\n                  />\r\n                  <TextField\r\n                      id=\"address\"\r\n                      name=\"address\"\r\n                      label=\"Address\"\r\n                      value={editFormData.address}\r\n                      onChange={handleInputChange}\r\n                      fullWidth\r\n                  />\r\n                  <TextField\r\n                      id=\"phone_number\"\r\n                      name=\"phone_number\"\r\n                      label=\"Phone\"\r\n                      value={editFormData.phone_number}\r\n                      onChange={handleInputChange}\r\n                      fullWidth\r\n                  />\r\n                  <TextField\r\n                      id=\"website\"\r\n                      name=\"website\"\r\n                      label=\"Website\"\r\n                      value={editFormData.website}\r\n                      onChange={handleInputChange}\r\n                      fullWidth\r\n                  />\r\n                  <Box sx={{ display: 'flex', gap: 2, mt: 2, justifyContent: 'flex-end' }}>\r\n                      <Button \r\n                          type=\"button\" \r\n                          variant=\"outlined\"\r\n                          onClick={handleEditToggle} \r\n                          disabled={isLoading}\r\n                      >\r\n                          Cancel\r\n                      </Button>\r\n                      <Button \r\n                          type=\"submit\" \r\n                          variant=\"contained\"\r\n                          color=\"primary\"\r\n                          disabled={isLoading}\r\n                      >\r\n                          {isLoading ? 'Saving...' : 'Save Changes'}\r\n                      </Button>\r\n                  </Box>\r\n              </Box>\r\n          </form>\r\n        ) : (\r\n          // --- View Mode ---\r\n          <div>\r\n            <p><strong>Name:</strong> {businessData.business_name}</p>\r\n            <p><strong>Description:</strong> {businessData.business_description || '-'}</p>\r\n            <p><strong>Address:</strong> {businessData.address || '-'}</p>\r\n            <p><strong>Phone:</strong> {businessData.phone_number || '-'}</p>\r\n            <p><strong>Website:</strong> {businessData.website ? <a href={businessData.website} target=\"_blank\" rel=\"noopener noreferrer\">{businessData.website}</a> : '-'}</p>\r\n            <hr/>\r\n            <p><strong>Business ID:</strong> {businessData.business_id}</p>\r\n            <p><strong>Owner ID:</strong> {businessData.owner_id}</p>\r\n            <Box sx={{ display: 'flex', gap: 2, mt: 2 }}>\r\n              <Button \r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={() => setIsEditing(true)}\r\n                startIcon={<EditIcon />}\r\n                sx={{ mr: 1 }}\r\n              >\r\n                Edit Details\r\n              </Button>\r\n              <Button \r\n                variant=\"outlined\"\r\n                color=\"secondary\"\r\n                onClick={() => navigate('/templates')}\r\n                startIcon={<DescriptionIcon />}\r\n              >\r\n                Manage Templates\r\n              </Button>\r\n              <Button \r\n                variant=\"outlined\"\r\n                color=\"error\"\r\n                onClick={handleLogout}\r\n                startIcon={<LogoutIcon />}\r\n                sx={{ ml: 'auto' }}\r\n              >\r\n                Logout\r\n              </Button>\r\n            </Box>\r\n          </div>\r\n        )}\r\n\r\n        <hr />\r\n\r\n        {/* Replace the old agent list with our AgentSection component */}\r\n        <Typography variant=\"h6\" gutterBottom>\r\n          Agents\r\n        </Typography>\r\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 2 }}>\r\n          <Button \r\n            variant=\"contained\" \r\n            color=\"primary\" \r\n            onClick={() => {\r\n              setEditingAgent(null);\r\n              setNewAgentData({\r\n                agent_name: '',\r\n                agent_description: ''\r\n              });\r\n              setIsEditingAgent(true);\r\n            }}\r\n            startIcon={<AddIcon />}\r\n          >\r\n            Add Agent\r\n          </Button>\r\n        </Box>\r\n        {agents.length === 0 ? (\r\n          <Typography variant=\"body1\">No agents found.</Typography>\r\n        ) : (\r\n          <List>\r\n            {agents.map((agent) => (\r\n              <ListItem key={agent.agent_id} \r\n                onClick={() => navigateToStageManagement(agent.agent_id, agent.agent_name)}\r\n                sx={{ \r\n                  cursor: 'pointer', \r\n                  border: '1px solid #e0e0e0', \r\n                  borderRadius: 1, \r\n                  mb: 1,\r\n                  '&:hover': {\r\n                    backgroundColor: '#f5f5f5'\r\n                  }\r\n                }}\r\n              >\r\n                <ListItemText \r\n                  primary={agent.agent_name} \r\n                  secondary={\r\n                    <>\r\n                      <Typography component=\"span\" variant=\"body2\" color=\"text.primary\">\r\n                        {agent.agent_description || 'No description'}\r\n                      </Typography>\r\n                      <Typography component=\"div\" variant=\"caption\" color=\"text.secondary\">\r\n                        Agent ID: {agent.agent_id}\r\n                      </Typography>\r\n                    </>\r\n                  }\r\n                />\r\n                <ListItemSecondaryAction>\r\n                  <IconButton edge=\"end\" aria-label=\"edit\" onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    handleEditAgent(agent);\r\n                  }}>\r\n                    <EditIcon />\r\n                  </IconButton>\r\n                  <IconButton edge=\"end\" aria-label=\"delete\" onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    handleDeleteAgent(agent.agent_id);\r\n                  }}>\r\n                    <DeleteIcon />\r\n                  </IconButton>\r\n                </ListItemSecondaryAction>\r\n              </ListItem>\r\n            ))}\r\n          </List>\r\n        )}\r\n        \r\n        {/* Agent Edit Dialog */}\r\n        <Dialog open={isEditingAgent} onClose={() => setIsEditingAgent(false)} maxWidth=\"sm\" fullWidth>\r\n          <DialogTitle>{editingAgent ? 'Edit Agent' : 'Create New Agent'}</DialogTitle>\r\n          <DialogContent>\r\n            <TextField\r\n              autoFocus\r\n              margin=\"dense\"\r\n              id=\"agent_name\"\r\n              label=\"Agent Name\"\r\n              type=\"text\"\r\n              fullWidth\r\n              value={editingAgent ? editingAgent.agent_name : newAgentData.agent_name}\r\n              onChange={(e) => {\r\n                if (editingAgent) {\r\n                  setEditingAgent({\r\n                    ...editingAgent,\r\n                    agent_name: e.target.value\r\n                  });\r\n                } else {\r\n                  setNewAgentData({\r\n                    ...newAgentData,\r\n                    agent_name: e.target.value\r\n                  });\r\n                }\r\n              }}\r\n              required\r\n            />\r\n            <TextField\r\n              margin=\"dense\"\r\n              id=\"agent_description\"\r\n              label=\"Description\"\r\n              type=\"text\"\r\n              fullWidth\r\n              multiline\r\n              rows={4}\r\n              value={editingAgent ? editingAgent.agent_description : newAgentData.agent_description}\r\n              onChange={(e) => {\r\n                if (editingAgent) {\r\n                  setEditingAgent({\r\n                    ...editingAgent,\r\n                    agent_description: e.target.value\r\n                  });\r\n                } else {\r\n                  setNewAgentData({\r\n                    ...newAgentData,\r\n                    agent_description: e.target.value\r\n                  });\r\n                }\r\n              }}\r\n            />\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={() => setIsEditingAgent(false)} color=\"primary\">\r\n              Cancel\r\n            </Button>\r\n            <Button \r\n              onClick={async () => {\r\n                try {\r\n                  const agentData = editingAgent ? editingAgent : newAgentData;\r\n                  \r\n                  if (!agentData.agent_name) {\r\n                    handleSnackbarOpen('Agent name is required', 'error');\r\n                    return;\r\n                  }\r\n                  \r\n                  const url = editingAgent \r\n                    ? `/agents/${editingAgent.agent_id}` \r\n                    : '/agents';\r\n                  \r\n                  const method = editingAgent ? 'PUT' : 'POST';\r\n                  \r\n                  const requestBody = {\r\n                    ...agentData,\r\n                    business_id: businessId\r\n                  };\r\n                  \r\n                  const response = await fetch(url, {\r\n                    method,\r\n                    headers: {\r\n                      'Content-Type': 'application/json',\r\n                      'Accept': 'application/json',\r\n                    },\r\n                    credentials: 'include',\r\n                    body: JSON.stringify(requestBody)\r\n                  });\r\n                  \r\n                  if (!response.ok) {\r\n                    throw new Error('Failed to save agent');\r\n                  }\r\n                  \r\n                  handleSnackbarOpen(\r\n                    editingAgent ? 'Agent updated successfully' : 'Agent created successfully', \r\n                    'success'\r\n                  );\r\n                  \r\n                  setIsEditingAgent(false);\r\n                  fetchAgents();\r\n                } catch (error) {\r\n                  console.error('Error saving agent:', error);\r\n                  handleSnackbarOpen(`Error: ${error.message}`, 'error');\r\n                }\r\n              }} \r\n              color=\"primary\"\r\n              variant=\"contained\"\r\n            >\r\n              {editingAgent ? 'Update' : 'Create'}\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n        \r\n        {/* Snackbar for notifications */}\r\n        <Snackbar \r\n          open={snackbar.open}\r\n          autoHideDuration={6000}\r\n          onClose={handleSnackbarClose}\r\n          anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n        >\r\n          <Alert onClose={handleSnackbarClose} severity={snackbar.severity} sx={{ width: '100%' }}>\r\n            {snackbar.message}\r\n          </Alert>\r\n        </Snackbar>\r\n      </Paper>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default BusinessDetailsView;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}