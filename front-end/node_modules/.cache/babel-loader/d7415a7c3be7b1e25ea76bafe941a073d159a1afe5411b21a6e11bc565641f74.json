{"ast":null,"code":"var _jsxFileName = \"C:\\\\icmp_events_api\\\\front-end\\\\src\\\\components\\\\BusinessDetailsView\\\\BusinessDetailsView.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport AgentSection from '../AgentSection';\nimport { Snackbar, Alert, Box, IconButton, Typography, Container, Paper, Button, TextField, List, ListItem, ListItemText, ListItemSecondaryAction, Dialog, DialogTitle, DialogContent, DialogActions, Select, MenuItem, FormControl, InputLabel, CircularProgress } from '@mui/material';\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\nimport EditIcon from '@mui/icons-material/Edit';\nimport DescriptionIcon from '@mui/icons-material/Description';\nimport LogoutIcon from '@mui/icons-material/Logout';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport AddIcon from '@mui/icons-material/Add';\n\n// Define your backend API base URL\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:5000';\n\n// Import services (assuming they exist and are configured)\nimport { businessService } from '../../services/businessService';\nimport { stageService } from '../../services/stageService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction BusinessDetailsView() {\n  _s();\n  var _agent_name;\n  const navigate = useNavigate();\n  const [businessData, setBusinessData] = useState(null);\n  const [editFormData, setEditFormData] = useState({}); // State for form data\n  const [agents, setAgents] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isSaving, setIsSaving] = useState(false); // Added saving state\n  const [error, setError] = useState(null);\n  const [isEditing, setIsEditing] = useState(false);\n  const [snackbar, setSnackbar] = useState({\n    open: false,\n    message: '',\n    severity: 'success'\n  });\n  const [isEditingAgent, setIsEditingAgent] = useState(false);\n  const [editingAgent, setEditingAgent] = useState(null);\n  const [newAgentData, setNewAgentData] = useState({\n    agent_name: '',\n    agent_description: ''\n  });\n\n  // State for default stage selection\n  const [availableStages, setAvailableStages] = useState([]);\n  const [selectedStageId, setSelectedStageId] = useState('');\n\n  // Get the business ID from localStorage instead of hardcoding\n  const businessId = localStorage.getItem('businessId');\n  const handleSnackbarOpen = useCallback((message, severity = 'success') => {\n    setSnackbar({\n      open: true,\n      message,\n      severity\n    });\n  }, []);\n  const handleSnackbarClose = () => {\n    setSnackbar({\n      ...snackbar,\n      open: false\n    });\n  };\n  const handleNavigateToLogin = () => {\n    navigate('/login');\n  };\n  const handleLogout = useCallback(() => {\n    // Clear localStorage\n    localStorage.removeItem('userId');\n    localStorage.removeItem('businessId');\n    localStorage.removeItem('businessApiKey');\n\n    // Show logout message\n    handleSnackbarOpen('Logged out successfully', 'success');\n\n    // Navigate to login page\n    navigate('/login');\n  }, [navigate, handleSnackbarOpen]);\n\n  // Navigate to stage management for a specific agent\n  const navigateToStageManagement = useCallback((agentId, agentName) => {\n    console.log(`Navigating to stages for agent: ${agentName} (${agentId})`);\n\n    // Store agent ID in localStorage for persistence\n    localStorage.setItem('agentId', agentId);\n\n    // Navigate to stages with proper URL format\n    navigate(`/stages?business_id=${businessId}&agent_id=${agentId}`);\n  }, [navigate, businessId]);\n\n  // Fetch business data, stages, and agents\n  const fetchData = useCallback(async () => {\n    if (!businessId) {\n      setError(\"Business ID not found. Please login again.\");\n      setIsLoading(false);\n      return;\n    }\n    setIsLoading(true);\n    setError(null); // Clear previous errors\n    console.log(`Fetching data for business ID: ${businessId}`);\n    try {\n      // Fetch Business Details (ensure service includes first_stage_id)\n      // Use await Promise.all for concurrent fetching\n      const [fetchedBusinessData, fetchedStages, fetchedAgents] = await Promise.all([businessService.getBusiness(businessId), stageService.getStages(businessId),\n      // Fetch all stages for the business\n      businessService.getAgents(businessId) // Assuming a service function exists\n      ]);\n      console.log('Fetched business data:', fetchedBusinessData);\n      setBusinessData(fetchedBusinessData);\n      setEditFormData(fetchedBusinessData); // Initialize form data with current values\n      setSelectedStageId(fetchedBusinessData.first_stage_id || ''); // Set initial dropdown value\n\n      console.log('Fetched stages:', fetchedStages);\n      setAvailableStages(fetchedStages || []);\n      console.log('Fetched agents:', fetchedAgents);\n      setAgents(fetchedAgents || []);\n    } catch (err) {\n      console.error('Error fetching data:', err);\n      setError(`Failed to load data: ${err.message}`);\n      handleSnackbarOpen(`Error loading data: ${err.message}`, 'error');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [businessId, handleSnackbarOpen]);\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]); // Run fetchData when component mounts or fetchData changes\n\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setEditFormData(prevData => ({\n      ...prevData,\n      [name]: value\n    }));\n  };\n  const handleEditToggle = () => {\n    if (!isEditing && businessData) {\n      setEditFormData({\n        business_name: businessData.business_name || '',\n        business_description: businessData.business_description || '',\n        address: businessData.address || '',\n        phone_number: businessData.phone_number || '',\n        website: businessData.website || ''\n      });\n    }\n    setIsEditing(!isEditing);\n    setError(null); // Clear errors when toggling mode\n  };\n  const handleSaveChanges = async e => {\n    e.preventDefault(); // Prevent default form submission\n    setIsSaving(true); // Indicate saving process\n    setError(null);\n    console.log(\"Saving business changes:\", editFormData);\n    try {\n      // Extract only updatable fields\n      const dataToUpdate = {\n        business_name: editFormData.business_name,\n        business_description: editFormData.business_description,\n        address: editFormData.address,\n        phone_number: editFormData.phone_number,\n        website: editFormData.website\n      };\n      await businessService.updateBusiness(businessId, dataToUpdate);\n\n      // Update the main business data state after successful save\n      setBusinessData(prev => ({\n        ...prev,\n        ...dataToUpdate\n      }));\n      setIsEditing(false); // Exit edit mode\n      handleSnackbarOpen('Business details updated successfully!', 'success');\n    } catch (err) {\n      console.error('Error saving business details:', err);\n      setError(`Save failed: ${err.message}`);\n      handleSnackbarOpen(`Error saving details: ${err.message}`, 'error');\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  // --- Default Stage Logic ---\n  const handleStageSelectChange = event => {\n    setSelectedStageId(event.target.value);\n  };\n  const handleSaveDefaultStage = async () => {\n    if (!businessId) return;\n    setIsSaving(true);\n    setError(null);\n    try {\n      const stageIdToSave = selectedStageId === '' ? null : selectedStageId;\n      await businessService.setDefaultStage(businessId, stageIdToSave);\n      // Update local state optimistically or refetch\n      setBusinessData(prev => ({\n        ...prev,\n        first_stage_id: stageIdToSave\n      }));\n      handleSnackbarOpen('Default starting stage updated successfully!', 'success');\n    } catch (err) {\n      console.error('Error saving default stage:', err);\n      setError(`Failed to save default stage: ${err.message}`);\n      handleSnackbarOpen(`Error saving default stage: ${err.message}`, 'error');\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  // Handle edit agent\n  const handleEditAgent = agent => {\n    setEditingAgent(agent);\n    setIsEditingAgent(true);\n  };\n\n  // Handle delete agent\n  const handleDeleteAgent = async agentId => {\n    if (!window.confirm('Are you sure you want to delete this agent?')) {\n      return;\n    }\n    setIsLoading(true);\n    try {\n      await businessService.deleteAgent(businessId, agentId); // Assuming service exists\n      setAgents(prev => prev.filter(agent => agent.agent_id !== agentId));\n      handleSnackbarOpen('Agent deleted successfully', 'success');\n    } catch (error) {\n      console.error('Error deleting agent:', error);\n      handleSnackbarOpen(`Error deleting agent: ${error.message}`, 'error');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleAgentDialogClose = () => {\n    setIsEditingAgent(false);\n    setEditingAgent(null);\n    setNewAgentData({\n      agent_name: '',\n      agent_description: ''\n    }); // Reset form\n  };\n  const handleAgentFormChange = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    if (editingAgent) {\n      setEditingAgent(prev => ({\n        ...prev,\n        [name]: value\n      }));\n    } else {\n      setNewAgentData(prev => ({\n        ...prev,\n        [name]: value\n      }));\n    }\n  };\n  const handleAgentFormSubmit = async event => {\n    var _agentData$agent_name;\n    event.preventDefault();\n    const agentData = editingAgent || newAgentData;\n    if (!((_agentData$agent_name = agentData.agent_name) !== null && _agentData$agent_name !== void 0 && _agentData$agent_name.trim())) {\n      handleSnackbarOpen('Agent name cannot be empty', 'warning');\n      return;\n    }\n    setIsSaving(true); // Use general saving indicator\n    try {\n      let savedAgent;\n      if (editingAgent) {\n        savedAgent = await businessService.updateAgent(businessId, editingAgent.agent_id, agentData);\n        setAgents(prev => prev.map(a => a.agent_id === savedAgent.agent_id ? savedAgent : a));\n      } else {\n        savedAgent = await businessService.createAgent(businessId, agentData);\n        setAgents(prev => [...prev, savedAgent]);\n      }\n      handleSnackbarOpen(editingAgent ? 'Agent updated' : 'Agent created', 'success');\n      handleAgentDialogClose();\n    } catch (error) {\n      console.error('Error saving agent:', error);\n      handleSnackbarOpen(`Error saving agent: ${error.message}`, 'error');\n    } finally {\n      setIsSaving(false);\n    }\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        display: \"flex\",\n        justifyContent: \"center\",\n        mt: 5,\n        children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 74\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 23\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Show login prompt if no businessId (e.g., localStorage cleared)\n  if (!businessId) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"warning\",\n        sx: {\n          mt: 2\n        },\n        children: \"Business ID not found. Please log in or configure your application.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => navigate('/login'),\n        sx: {\n          mt: 1\n        },\n        children: \"Go to Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Show error if data fetching failed (and not just loading)\n  if (error && !businessData) {\n    // Only show main error if data failed completely\n    return /*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"error\",\n        sx: {\n          mt: 2\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 23\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Should ideally not happen if businessId exists, but good fallback\n  if (!businessData) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"info\",\n        sx: {\n          mt: 2\n        },\n        children: \"No business data loaded.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 23\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"lg\",\n    children: [/*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 3,\n      sx: {\n        p: 3,\n        mt: 2\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        alignItems: \"center\",\n        mb: 2,\n        children: [/*#__PURE__*/_jsxDEV(IconButton, {\n          onClick: () => navigate(-1),\n          children: [\" \", /*#__PURE__*/_jsxDEV(ArrowBackIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h4\",\n          component: \"h1\",\n          children: \"Business Dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outlined\",\n          startIcon: /*#__PURE__*/_jsxDEV(LogoutIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 24\n          }, this),\n          onClick: handleLogout,\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"error\",\n        sx: {\n          mb: 2\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        mb: 4,\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          gutterBottom: true,\n          children: \"Business Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 11\n        }, this), !isEditing ? /*#__PURE__*/_jsxDEV(Box, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Name:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 27\n            }, this), \" \", businessData.business_name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Description:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 27\n            }, this), \" \", businessData.business_description || 'N/A']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Address:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 27\n            }, this), \" \", businessData.address || 'N/A']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Phone:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 27\n            }, this), \" \", businessData.phone_number || 'N/A']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Website:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 27\n            }, this), \" \", businessData.website ? /*#__PURE__*/_jsxDEV(\"a\", {\n              href: businessData.website,\n              target: \"_blank\",\n              rel: \"noopener noreferrer\",\n              children: businessData.website\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 77\n            }, this) : 'N/A']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Business ID:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 352,\n              columnNumber: 27\n            }, this), \" \", businessData.business_id]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Owner ID:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 27\n            }, this), \" \", businessData.owner_id]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            startIcon: /*#__PURE__*/_jsxDEV(EditIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 28\n            }, this),\n            onClick: handleEditToggle,\n            sx: {\n              mt: 2\n            },\n            children: \"Edit Details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Box, {\n          component: \"form\",\n          onSubmit: handleSaveChanges,\n          noValidate: true,\n          autoComplete: \"off\",\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            label: \"Business Name\",\n            name: \"business_name\",\n            value: editFormData.business_name || '',\n            onChange: handleInputChange,\n            fullWidth: true,\n            margin: \"normal\",\n            required: true,\n            disabled: isSaving\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"Description\",\n            name: \"business_description\",\n            value: editFormData.business_description || '',\n            onChange: handleInputChange,\n            fullWidth: true,\n            margin: \"normal\",\n            multiline: true,\n            rows: 3,\n            disabled: isSaving\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"Address\",\n            name: \"address\",\n            value: editFormData.address || '',\n            onChange: handleInputChange,\n            fullWidth: true,\n            margin: \"normal\",\n            disabled: isSaving\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"Phone Number\",\n            name: \"phone_number\",\n            value: editFormData.phone_number || '',\n            onChange: handleInputChange,\n            fullWidth: true,\n            margin: \"normal\",\n            disabled: isSaving\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            label: \"Website\",\n            name: \"website\",\n            value: editFormData.website || '',\n            onChange: handleInputChange,\n            fullWidth: true,\n            margin: \"normal\",\n            type: \"url\",\n            disabled: isSaving\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              mt: 2\n            },\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              type: \"submit\",\n              variant: \"contained\",\n              disabled: isSaving,\n              sx: {\n                mr: 1\n              },\n              children: isSaving ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n                size: 24\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 421,\n                columnNumber: 31\n              }, this) : 'Save Changes'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 415,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outlined\",\n              onClick: handleEditToggle,\n              disabled: isSaving,\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 431,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        mt: 4,\n        mb: 4,\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h6\",\n          gutterBottom: true,\n          children: \"Conversation Settings\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n          fullWidth: true,\n          margin: \"normal\",\n          children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n            id: \"default-stage-label\",\n            children: \"Default Starting Stage\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Select, {\n            labelId: \"default-stage-label\",\n            id: \"default-stage-select\",\n            value: selectedStageId // Bind to state\n            ,\n            label: \"Default Starting Stage\",\n            onChange: handleStageSelectChange // Handle change\n            ,\n            disabled: isSaving || isLoading // Disable while loading/saving\n            ,\n            children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n              value: \"\",\n              children: /*#__PURE__*/_jsxDEV(\"em\", {\n                children: \"None (System will pick first available)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 448,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 447,\n              columnNumber: 15\n            }, this), availableStages.length > 0 ? availableStages.map(stage => /*#__PURE__*/_jsxDEV(MenuItem, {\n              value: stage.stage_id,\n              children: [stage.stage_name, \" (\", stage.stage_id.substring(0, 8), \"...)\"]\n            }, stage.stage_id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 453,\n              columnNumber: 19\n            }, this)) : /*#__PURE__*/_jsxDEV(MenuItem, {\n              disabled: true,\n              children: \"No stages available\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 458,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 438,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 436,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          onClick: handleSaveDefaultStage // Save handler\n          ,\n          disabled: isSaving || isLoading || selectedStageId === (businessData.first_stage_id || '') // Disable if no change\n          ,\n          sx: {\n            mt: 2\n          },\n          children: isSaving ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n            size: 24\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 468,\n            columnNumber: 25\n          }, this) : 'Save Default Stage'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 462,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 434,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 472,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AgentSection, {\n        agents: agents,\n        isLoading: isLoading // Pass loading state if needed by AgentSection\n        ,\n        isSaving: isSaving // Pass saving state\n        ,\n        businessId: businessId,\n        onEditAgent: handleEditAgent,\n        onDeleteAgent: handleDeleteAgent,\n        onNavigateToStages: navigateToStageManagement,\n        onAddAgent: () => {\n          setEditingAgent(null);\n          setIsEditingAgent(true);\n        } // Open dialog for new agent\n        ,\n        handleSnackbarOpen: handleSnackbarOpen // Pass snackbar handler\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 476,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n        open: isEditingAgent,\n        onClose: handleAgentDialogClose,\n        fullWidth: true,\n        maxWidth: \"sm\",\n        children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n          children: editingAgent ? 'Edit Agent' : 'Add New Agent'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 490,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            autoFocus: true,\n            margin: \"dense\",\n            name: \"agent_name\",\n            label: \"Agent Name\",\n            type: \"text\",\n            fullWidth: true,\n            variant: \"standard\",\n            value: editingAgent ? editingAgent.agent_name : newAgentData.agent_name,\n            onChange: handleAgentFormChange,\n            required: true,\n            disabled: isSaving\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 492,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            margin: \"dense\",\n            name: \"agent_description\",\n            label: \"Agent Description\",\n            type: \"text\",\n            fullWidth: true,\n            variant: \"standard\",\n            multiline: true,\n            rows: 3,\n            value: editingAgent ? editingAgent.agent_description : newAgentData.agent_description,\n            onChange: handleAgentFormChange,\n            disabled: isSaving\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 505,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: handleAgentDialogClose,\n            disabled: isSaving,\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 520,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: handleAgentFormSubmit,\n            variant: \"contained\",\n            disabled: isSaving || !((_agent_name = (editingAgent || newAgentData).agent_name) !== null && _agent_name !== void 0 && _agent_name.trim()) // Disable if name empty\n            ,\n            children: isSaving ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n              size: 24\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 526,\n              columnNumber: 27\n            }, this) : editingAgent ? 'Save Changes' : 'Create Agent'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 521,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 519,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 489,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n      open: snackbar.open,\n      autoHideDuration: 6000,\n      onClose: handleSnackbarClose,\n      anchorOrigin: {\n        vertical: 'bottom',\n        horizontal: 'center'\n      },\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        onClose: handleSnackbarClose,\n        severity: snackbar.severity,\n        sx: {\n          width: '100%'\n        },\n        children: snackbar.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 539,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 533,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 321,\n    columnNumber: 5\n  }, this);\n}\n_s(BusinessDetailsView, \"pxoTNBbnGPDIB1kji49QPzrEsrI=\", false, function () {\n  return [useNavigate];\n});\n_c = BusinessDetailsView;\nexport default BusinessDetailsView;\nvar _c;\n$RefreshReg$(_c, \"BusinessDetailsView\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useNavigate","AgentSection","Snackbar","Alert","Box","IconButton","Typography","Container","Paper","Button","TextField","List","ListItem","ListItemText","ListItemSecondaryAction","Dialog","DialogTitle","DialogContent","DialogActions","Select","MenuItem","FormControl","InputLabel","CircularProgress","ArrowBackIcon","EditIcon","DescriptionIcon","LogoutIcon","DeleteIcon","AddIcon","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","businessService","stageService","jsxDEV","_jsxDEV","BusinessDetailsView","_s","_agent_name","navigate","businessData","setBusinessData","editFormData","setEditFormData","agents","setAgents","isLoading","setIsLoading","isSaving","setIsSaving","error","setError","isEditing","setIsEditing","snackbar","setSnackbar","open","message","severity","isEditingAgent","setIsEditingAgent","editingAgent","setEditingAgent","newAgentData","setNewAgentData","agent_name","agent_description","availableStages","setAvailableStages","selectedStageId","setSelectedStageId","businessId","localStorage","getItem","handleSnackbarOpen","handleSnackbarClose","handleNavigateToLogin","handleLogout","removeItem","navigateToStageManagement","agentId","agentName","console","log","setItem","fetchData","fetchedBusinessData","fetchedStages","fetchedAgents","Promise","all","getBusiness","getStages","getAgents","first_stage_id","err","handleInputChange","e","name","value","target","prevData","handleEditToggle","business_name","business_description","address","phone_number","website","handleSaveChanges","preventDefault","dataToUpdate","updateBusiness","prev","handleStageSelectChange","event","handleSaveDefaultStage","stageIdToSave","setDefaultStage","handleEditAgent","agent","handleDeleteAgent","window","confirm","deleteAgent","filter","agent_id","handleAgentDialogClose","handleAgentFormChange","handleAgentFormSubmit","_agentData$agent_name","agentData","trim","savedAgent","updateAgent","map","a","createAgent","children","display","justifyContent","mt","fileName","_jsxFileName","lineNumber","columnNumber","sx","onClick","maxWidth","elevation","p","alignItems","mb","variant","component","startIcon","gutterBottom","href","rel","business_id","owner_id","onSubmit","noValidate","autoComplete","label","onChange","fullWidth","margin","required","disabled","multiline","rows","type","mr","size","id","labelId","length","stage","stage_id","stage_name","substring","onEditAgent","onDeleteAgent","onNavigateToStages","onAddAgent","onClose","autoFocus","autoHideDuration","anchorOrigin","vertical","horizontal","width","_c","$RefreshReg$"],"sources":["C:/icmp_events_api/front-end/src/components/BusinessDetailsView/BusinessDetailsView.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport AgentSection from '../AgentSection';\r\nimport { \r\n  Snackbar, \r\n  Alert, \r\n  Box, \r\n  IconButton, \r\n  Typography, \r\n  Container, \r\n  Paper,\r\n  Button,\r\n  TextField,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  ListItemSecondaryAction,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Select,\r\n  MenuItem,\r\n  FormControl,\r\n  InputLabel,\r\n  CircularProgress\r\n} from '@mui/material';\r\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\r\nimport EditIcon from '@mui/icons-material/Edit';\r\nimport DescriptionIcon from '@mui/icons-material/Description';\r\nimport LogoutIcon from '@mui/icons-material/Logout';\r\nimport DeleteIcon from '@mui/icons-material/Delete';\r\nimport AddIcon from '@mui/icons-material/Add';\r\n\r\n// Define your backend API base URL\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:5000';\r\n\r\n// Import services (assuming they exist and are configured)\r\nimport { businessService } from '../../services/businessService';\r\nimport { stageService } from '../../services/stageService';\r\n\r\nfunction BusinessDetailsView() {\r\n  const navigate = useNavigate();\r\n  const [businessData, setBusinessData] = useState(null);\r\n  const [editFormData, setEditFormData] = useState({}); // State for form data\r\n  const [agents, setAgents] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isSaving, setIsSaving] = useState(false); // Added saving state\r\n  const [error, setError] = useState(null);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [snackbar, setSnackbar] = useState({ open: false, message: '', severity: 'success' });\r\n  const [isEditingAgent, setIsEditingAgent] = useState(false);\r\n  const [editingAgent, setEditingAgent] = useState(null);\r\n  const [newAgentData, setNewAgentData] = useState({\r\n    agent_name: '',\r\n    agent_description: ''\r\n  });\r\n\r\n  // State for default stage selection\r\n  const [availableStages, setAvailableStages] = useState([]); \r\n  const [selectedStageId, setSelectedStageId] = useState(''); \r\n\r\n  // Get the business ID from localStorage instead of hardcoding\r\n  const businessId = localStorage.getItem('businessId');\r\n\r\n  const handleSnackbarOpen = useCallback((message, severity = 'success') => {\r\n    setSnackbar({\r\n      open: true,\r\n      message,\r\n      severity\r\n    });\r\n  }, []);\r\n\r\n  const handleSnackbarClose = () => {\r\n    setSnackbar({ ...snackbar, open: false });\r\n  };\r\n\r\n  const handleNavigateToLogin = () => {\r\n    navigate('/login');\r\n  };\r\n\r\n  const handleLogout = useCallback(() => {\r\n    // Clear localStorage\r\n    localStorage.removeItem('userId');\r\n    localStorage.removeItem('businessId');\r\n    localStorage.removeItem('businessApiKey');\r\n    \r\n    // Show logout message\r\n    handleSnackbarOpen('Logged out successfully', 'success');\r\n    \r\n    // Navigate to login page\r\n    navigate('/login');\r\n  }, [navigate, handleSnackbarOpen]);\r\n\r\n  // Navigate to stage management for a specific agent\r\n  const navigateToStageManagement = useCallback((agentId, agentName) => {\r\n    console.log(`Navigating to stages for agent: ${agentName} (${agentId})`);\r\n    \r\n    // Store agent ID in localStorage for persistence\r\n    localStorage.setItem('agentId', agentId);\r\n    \r\n    // Navigate to stages with proper URL format\r\n    navigate(`/stages?business_id=${businessId}&agent_id=${agentId}`);\r\n  }, [navigate, businessId]);\r\n\r\n  // Fetch business data, stages, and agents\r\n  const fetchData = useCallback(async () => {\r\n    if (!businessId) {\r\n      setError(\"Business ID not found. Please login again.\");\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n    setIsLoading(true);\r\n    setError(null); // Clear previous errors\r\n    console.log(`Fetching data for business ID: ${businessId}`);\r\n\r\n    try {\r\n      // Fetch Business Details (ensure service includes first_stage_id)\r\n      // Use await Promise.all for concurrent fetching\r\n      const [fetchedBusinessData, fetchedStages, fetchedAgents] = await Promise.all([\r\n        businessService.getBusiness(businessId),\r\n        stageService.getStages(businessId), // Fetch all stages for the business\r\n        businessService.getAgents(businessId) // Assuming a service function exists\r\n      ]);\r\n\r\n      console.log('Fetched business data:', fetchedBusinessData);\r\n      setBusinessData(fetchedBusinessData);\r\n      setEditFormData(fetchedBusinessData); // Initialize form data with current values\r\n      setSelectedStageId(fetchedBusinessData.first_stage_id || ''); // Set initial dropdown value\r\n      \r\n      console.log('Fetched stages:', fetchedStages);\r\n      setAvailableStages(fetchedStages || []);\r\n\r\n      console.log('Fetched agents:', fetchedAgents);\r\n      setAgents(fetchedAgents || []);\r\n      \r\n    } catch (err) {\r\n      console.error('Error fetching data:', err);\r\n      setError(`Failed to load data: ${err.message}`);\r\n      handleSnackbarOpen(`Error loading data: ${err.message}`, 'error');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [businessId, handleSnackbarOpen]);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, [fetchData]); // Run fetchData when component mounts or fetchData changes\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setEditFormData(prevData => ({\r\n      ...prevData,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const handleEditToggle = () => {\r\n    if (!isEditing && businessData) {\r\n      setEditFormData({\r\n        business_name: businessData.business_name || '',\r\n        business_description: businessData.business_description || '',\r\n        address: businessData.address || '',\r\n        phone_number: businessData.phone_number || '',\r\n        website: businessData.website || ''\r\n      });\r\n    }\r\n    setIsEditing(!isEditing);\r\n    setError(null); // Clear errors when toggling mode\r\n  };\r\n\r\n  const handleSaveChanges = async (e) => {\r\n    e.preventDefault(); // Prevent default form submission\r\n    setIsSaving(true); // Indicate saving process\r\n    setError(null);\r\n    console.log(\"Saving business changes:\", editFormData);\r\n\r\n    try {\r\n      // Extract only updatable fields\r\n      const dataToUpdate = { \r\n        business_name: editFormData.business_name, \r\n        business_description: editFormData.business_description,\r\n        address: editFormData.address,\r\n        phone_number: editFormData.phone_number,\r\n        website: editFormData.website\r\n      }; \r\n      await businessService.updateBusiness(businessId, dataToUpdate);\r\n\r\n      // Update the main business data state after successful save\r\n      setBusinessData(prev => ({ ...prev, ...dataToUpdate })); \r\n      setIsEditing(false); // Exit edit mode\r\n      handleSnackbarOpen('Business details updated successfully!', 'success');\r\n    } catch (err) {\r\n      console.error('Error saving business details:', err);\r\n      setError(`Save failed: ${err.message}`);\r\n      handleSnackbarOpen(`Error saving details: ${err.message}`, 'error');\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  // --- Default Stage Logic ---\r\n  const handleStageSelectChange = (event) => {\r\n    setSelectedStageId(event.target.value);\r\n  };\r\n\r\n  const handleSaveDefaultStage = async () => {\r\n    if (!businessId) return;\r\n    setIsSaving(true);\r\n    setError(null);\r\n    try {\r\n      const stageIdToSave = selectedStageId === '' ? null : selectedStageId;\r\n      await businessService.setDefaultStage(businessId, stageIdToSave);\r\n      // Update local state optimistically or refetch\r\n      setBusinessData(prev => ({ ...prev, first_stage_id: stageIdToSave })); \r\n      handleSnackbarOpen('Default starting stage updated successfully!', 'success');\r\n    } catch (err) {\r\n      console.error('Error saving default stage:', err);\r\n      setError(`Failed to save default stage: ${err.message}`);\r\n      handleSnackbarOpen(`Error saving default stage: ${err.message}`, 'error');\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  // Handle edit agent\r\n  const handleEditAgent = (agent) => {\r\n    setEditingAgent(agent);\r\n    setIsEditingAgent(true);\r\n  };\r\n\r\n  // Handle delete agent\r\n  const handleDeleteAgent = async (agentId) => {\r\n    if (!window.confirm('Are you sure you want to delete this agent?')) {\r\n      return;\r\n    }\r\n    \r\n    setIsLoading(true);\r\n    try {\r\n      await businessService.deleteAgent(businessId, agentId); // Assuming service exists\r\n      setAgents(prev => prev.filter(agent => agent.agent_id !== agentId));\r\n      handleSnackbarOpen('Agent deleted successfully', 'success');\r\n    } catch (error) {\r\n      console.error('Error deleting agent:', error);\r\n      handleSnackbarOpen(`Error deleting agent: ${error.message}`, 'error');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleAgentDialogClose = () => {\r\n    setIsEditingAgent(false);\r\n    setEditingAgent(null);\r\n    setNewAgentData({ agent_name: '', agent_description: '' }); // Reset form\r\n  };\r\n\r\n  const handleAgentFormChange = (event) => {\r\n    const { name, value } = event.target;\r\n    if (editingAgent) {\r\n      setEditingAgent(prev => ({ ...prev, [name]: value }));\r\n    } else {\r\n      setNewAgentData(prev => ({ ...prev, [name]: value }));\r\n    }\r\n  };\r\n\r\n  const handleAgentFormSubmit = async (event) => {\r\n    event.preventDefault();\r\n    const agentData = editingAgent || newAgentData;\r\n    if (!agentData.agent_name?.trim()) {\r\n      handleSnackbarOpen('Agent name cannot be empty', 'warning');\r\n      return;\r\n    }\r\n\r\n    setIsSaving(true); // Use general saving indicator\r\n    try {\r\n      let savedAgent;\r\n      if (editingAgent) {\r\n        savedAgent = await businessService.updateAgent(businessId, editingAgent.agent_id, agentData);\r\n        setAgents(prev => prev.map(a => a.agent_id === savedAgent.agent_id ? savedAgent : a));\r\n      } else {\r\n        savedAgent = await businessService.createAgent(businessId, agentData);\r\n        setAgents(prev => [...prev, savedAgent]);\r\n      }\r\n      handleSnackbarOpen(editingAgent ? 'Agent updated' : 'Agent created', 'success');\r\n      handleAgentDialogClose();\r\n    } catch (error) {\r\n      console.error('Error saving agent:', error);\r\n      handleSnackbarOpen(`Error saving agent: ${error.message}`, 'error');\r\n    } finally {\r\n      setIsSaving(false);\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return <Container><Box display=\"flex\" justifyContent=\"center\" mt={5}><CircularProgress /></Box></Container>;\r\n  }\r\n\r\n  // Show login prompt if no businessId (e.g., localStorage cleared)\r\n  if (!businessId) {\r\n    return (\r\n      <Container>\r\n        <Alert severity=\"warning\" sx={{ mt: 2 }}>\r\n          Business ID not found. Please log in or configure your application.\r\n        </Alert>\r\n        <Button onClick={() => navigate('/login')} sx={{ mt: 1 }}>Go to Login</Button>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  // Show error if data fetching failed (and not just loading)\r\n  if (error && !businessData) { // Only show main error if data failed completely\r\n    return <Container><Alert severity=\"error\" sx={{ mt: 2 }}>{error}</Alert></Container>;\r\n  }\r\n\r\n  // Should ideally not happen if businessId exists, but good fallback\r\n  if (!businessData) { \r\n    return <Container><Alert severity=\"info\" sx={{ mt: 2 }}>No business data loaded.</Alert></Container>;\r\n  }\r\n\r\n  return (\r\n    <Container maxWidth=\"lg\">\r\n      <Paper elevation={3} sx={{ p: 3, mt: 2 }}>\r\n        <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" mb={2}>\r\n          <IconButton onClick={() => navigate(-1)}> {/* Go back */} \r\n            <ArrowBackIcon />\r\n          </IconButton>\r\n          <Typography variant=\"h4\" component=\"h1\">\r\n            Business Dashboard\r\n          </Typography>\r\n          <Button \r\n            variant=\"outlined\" \r\n            startIcon={<LogoutIcon />} \r\n            onClick={handleLogout}\r\n          >\r\n            Logout\r\n          </Button>\r\n        </Box>\r\n\r\n        {/* Display any general saving error */} \r\n        {error && <Alert severity=\"error\" sx={{ mb: 2 }}>{error}</Alert>}\r\n\r\n        {/* --- Business Details Section --- */} \r\n        <Box mb={4}>\r\n          <Typography variant=\"h5\" gutterBottom>Business Details</Typography>\r\n          {!isEditing ? (\r\n            <Box>\r\n              <Typography><strong>Name:</strong> {businessData.business_name}</Typography>\r\n              <Typography><strong>Description:</strong> {businessData.business_description || 'N/A'}</Typography>\r\n              <Typography><strong>Address:</strong> {businessData.address || 'N/A'}</Typography>\r\n              <Typography><strong>Phone:</strong> {businessData.phone_number || 'N/A'}</Typography>\r\n              <Typography><strong>Website:</strong> {businessData.website ? <a href={businessData.website} target=\"_blank\" rel=\"noopener noreferrer\">{businessData.website}</a> : 'N/A'}</Typography>\r\n              <Typography><strong>Business ID:</strong> {businessData.business_id}</Typography>\r\n              <Typography><strong>Owner ID:</strong> {businessData.owner_id}</Typography>\r\n              <Button \r\n                variant=\"contained\" \r\n                startIcon={<EditIcon />} \r\n                onClick={handleEditToggle} \r\n                sx={{ mt: 2 }}\r\n              >\r\n                Edit Details\r\n              </Button>\r\n            </Box>\r\n          ) : (\r\n            <Box component=\"form\" onSubmit={handleSaveChanges} noValidate autoComplete=\"off\">\r\n              <TextField \r\n                label=\"Business Name\"\r\n                name=\"business_name\"\r\n                value={editFormData.business_name || ''}\r\n                onChange={handleInputChange}\r\n                fullWidth \r\n                margin=\"normal\"\r\n                required\r\n                disabled={isSaving}\r\n              />\r\n              <TextField \r\n                label=\"Description\"\r\n                name=\"business_description\"\r\n                value={editFormData.business_description || ''}\r\n                onChange={handleInputChange}\r\n                fullWidth \r\n                margin=\"normal\"\r\n                multiline\r\n                rows={3}\r\n                disabled={isSaving}\r\n              />\r\n              <TextField \r\n                label=\"Address\"\r\n                name=\"address\"\r\n                value={editFormData.address || ''}\r\n                onChange={handleInputChange}\r\n                fullWidth \r\n                margin=\"normal\"\r\n                disabled={isSaving}\r\n              />\r\n              <TextField \r\n                label=\"Phone Number\"\r\n                name=\"phone_number\"\r\n                value={editFormData.phone_number || ''}\r\n                onChange={handleInputChange}\r\n                fullWidth \r\n                margin=\"normal\"\r\n                disabled={isSaving}\r\n              />\r\n              <TextField \r\n                label=\"Website\"\r\n                name=\"website\"\r\n                value={editFormData.website || ''}\r\n                onChange={handleInputChange}\r\n                fullWidth \r\n                margin=\"normal\"\r\n                type=\"url\"\r\n                disabled={isSaving}\r\n              />\r\n              <Box sx={{ mt: 2 }}>\r\n                <Button \r\n                  type=\"submit\" \r\n                  variant=\"contained\" \r\n                  disabled={isSaving}\r\n                  sx={{ mr: 1 }}\r\n                >\r\n                  {isSaving ? <CircularProgress size={24} /> : 'Save Changes'}\r\n                </Button>\r\n                <Button variant=\"outlined\" onClick={handleEditToggle} disabled={isSaving}>\r\n                  Cancel\r\n                </Button>\r\n              </Box>\r\n            </Box>\r\n          )}\r\n        </Box>\r\n\r\n        <hr />\r\n\r\n        {/* --- Default Stage Selection Section --- */} \r\n        <Box mt={4} mb={4}>\r\n          <Typography variant=\"h6\" gutterBottom>Conversation Settings</Typography>\r\n          <FormControl fullWidth margin=\"normal\">\r\n            <InputLabel id=\"default-stage-label\">Default Starting Stage</InputLabel>\r\n            <Select\r\n              labelId=\"default-stage-label\"\r\n              id=\"default-stage-select\"\r\n              value={selectedStageId} // Bind to state\r\n              label=\"Default Starting Stage\"\r\n              onChange={handleStageSelectChange} // Handle change\r\n              disabled={isSaving || isLoading} // Disable while loading/saving\r\n            >\r\n              {/* \"None\" option */}\r\n              <MenuItem value=\"\">\r\n                <em>None (System will pick first available)</em>\r\n              </MenuItem>\r\n              {/* Map available stages */} \r\n              {availableStages.length > 0 ? (\r\n                availableStages.map((stage) => (\r\n                  <MenuItem key={stage.stage_id} value={stage.stage_id}>\r\n                    {stage.stage_name} ({stage.stage_id.substring(0, 8)}...)\r\n                  </MenuItem>\r\n                ))\r\n              ) : (\r\n                <MenuItem disabled>No stages available</MenuItem>\r\n              )}\r\n            </Select>\r\n          </FormControl>\r\n          <Button \r\n            variant=\"contained\" \r\n            onClick={handleSaveDefaultStage} // Save handler\r\n            disabled={isSaving || isLoading || selectedStageId === (businessData.first_stage_id || '')} // Disable if no change\r\n            sx={{ mt: 2 }}\r\n          >\r\n            {isSaving ? <CircularProgress size={24} /> : 'Save Default Stage'}\r\n          </Button>\r\n        </Box>\r\n        \r\n        <hr />\r\n\r\n        {/* --- Agent Section --- */} \r\n        {/* Pass necessary props and handlers to AgentSection */}\r\n        <AgentSection \r\n          agents={agents}\r\n          isLoading={isLoading} // Pass loading state if needed by AgentSection\r\n          isSaving={isSaving} // Pass saving state\r\n          businessId={businessId}\r\n          onEditAgent={handleEditAgent} \r\n          onDeleteAgent={handleDeleteAgent}\r\n          onNavigateToStages={navigateToStageManagement} \r\n          onAddAgent={() => { setEditingAgent(null); setIsEditingAgent(true); }} // Open dialog for new agent\r\n          handleSnackbarOpen={handleSnackbarOpen} // Pass snackbar handler\r\n        />\r\n\r\n        {/* --- Dialog for Adding/Editing Agent --- */} \r\n        <Dialog open={isEditingAgent} onClose={handleAgentDialogClose} fullWidth maxWidth=\"sm\">\r\n          <DialogTitle>{editingAgent ? 'Edit Agent' : 'Add New Agent'}</DialogTitle>\r\n          <DialogContent>\r\n            <TextField\r\n              autoFocus\r\n              margin=\"dense\"\r\n              name=\"agent_name\"\r\n              label=\"Agent Name\"\r\n              type=\"text\"\r\n              fullWidth\r\n              variant=\"standard\"\r\n              value={editingAgent ? editingAgent.agent_name : newAgentData.agent_name}\r\n              onChange={handleAgentFormChange}\r\n              required\r\n              disabled={isSaving}\r\n            />\r\n            <TextField\r\n              margin=\"dense\"\r\n              name=\"agent_description\"\r\n              label=\"Agent Description\"\r\n              type=\"text\"\r\n              fullWidth\r\n              variant=\"standard\"\r\n              multiline\r\n              rows={3}\r\n              value={editingAgent ? editingAgent.agent_description : newAgentData.agent_description}\r\n              onChange={handleAgentFormChange}\r\n              disabled={isSaving}\r\n            />\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={handleAgentDialogClose} disabled={isSaving}>Cancel</Button>\r\n            <Button \r\n              onClick={handleAgentFormSubmit} \r\n              variant=\"contained\" \r\n              disabled={isSaving || !(editingAgent || newAgentData).agent_name?.trim()} // Disable if name empty\r\n            >\r\n              {isSaving ? <CircularProgress size={24} /> : (editingAgent ? 'Save Changes' : 'Create Agent')}\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n\r\n      </Paper>\r\n\r\n      <Snackbar \r\n        open={snackbar.open} \r\n        autoHideDuration={6000} \r\n        onClose={handleSnackbarClose}\r\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n      >\r\n        <Alert onClose={handleSnackbarClose} severity={snackbar.severity} sx={{ width: '100%' }}>\r\n          {snackbar.message}\r\n        </Alert>\r\n      </Snackbar>\r\n\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default BusinessDetailsView;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}