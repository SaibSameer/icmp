{"ast":null,"code":"// File: src/services/testService.js\n// Last Modified: 2026-03-29\nimport axios from 'axios';\nconst API_BASE_URL = 'http://localhost:5000';\n\n// Helper function to handle API calls and error responses\nconst handleApiCall = async (url, method, apiKey, data = null) => {\n  const headers = {\n    'Authorization': `Bearer ${apiKey}`,\n    'Content-Type': 'application/json'\n  };\n  try {\n    const response = await axios({\n      method: method,\n      url: url,\n      headers: headers,\n      data: data ? JSON.stringify(data) : null // Serialize data to JSON\n    });\n    if (response.status >= 200 && response.status < 300) {\n      return response.data;\n    } else {\n      console.error(\"API call failed:\", response);\n      throw new Error(`API call failed with status ${response.status}`);\n    }\n  } catch (error) {\n    console.error(\"API call failed:\", error);\n    throw error; // Re-throw the error for the component to handle\n  }\n};\n\n// --------------------------------------------------------\n// Configuration Service (Saving to localStorage - Insecure)\n// --------------------------------------------------------\nexport const saveConfig = async (apiKey, userId, businessId, businessApiKey) => {\n  // This function doesn't actually call an API. It only saves to localStorage.\n  return new Promise(resolve => {\n    localStorage.setItem('icmpApiKey', apiKey);\n    resolve({\n      success: true,\n      message: 'Configuration saved to localStorage'\n    });\n  });\n};\n\n// --------------------------------------------------------\n// User Management Service (Simulated)\n// --------------------------------------------------------\nexport const createUser = async (firstName, lastName, email) => {\n  try {\n    const apiKey = localStorage.getItem('icmpApiKey');\n    return await handleApiCall(`${API_BASE_URL}/users`, 'POST', apiKey, {\n      firstName,\n      lastName,\n      email\n    });\n  } catch (error) {\n    console.error(\"createUser API call failed:\", error);\n    throw error;\n  }\n};\n// --------------------------------------------------------\n// Business Management Service\n// --------------------------------------------------------\nexport const fetchBusinessDetails = async (businessId, apiKey) => {\n  //apiKey parameter here <----ADD ME\n  try {\n    return await handleApiCall(`${API_BASE_URL}/businesses/${businessId}`, 'GET', apiKey); //apiKey parameter here <----ADD ME\n  } catch (error) {\n    console.error(\"fetchBusinessDetails API call failed:\", error);\n    throw error;\n  }\n};\n\n// --------------------------------------------------------\n// Template Management Service\n// --------------------------------------------------------\nexport const createTemplate = async (templateData, apiKey) => {\n  try {\n    return await handleApiCall(`${API_BASE_URL}/templates`, 'POST', apiKey, templateData);\n  } catch (error) {\n    console.error(\"createTemplate API call failed:\", error);\n    throw error;\n  }\n};\nexport const fetchTemplates = async apiKey => {\n  try {\n    return await handleApiCall(`${API_BASE_URL}/templates`, 'GET', apiKey);\n  } catch (error) {\n    console.error(\"fetchTemplates API call failed:\", error);\n    throw error;\n  }\n};\n\n// --------------------------------------------------------\n// Stage Management Service\n// --------------------------------------------------------\nexport const createStage = async (stageData, apiKey) => {\n  try {\n    const API_ENDPOINT = `${API_BASE_URL}/stages`;\n    return await handleApiCall(API_ENDPOINT, 'POST', apiKey, stageData);\n  } catch (error) {\n    console.error(\"createStage API call failed:\", error);\n    throw error;\n  }\n};\nexport const fetchStages = async (businessId, apiKey) => {\n  try {\n    const API_ENDPOINT = `${API_BASE_URL}/stages`;\n    return await handleApiCall(API_ENDPOINT, 'GET', apiKey);\n  } catch (error) {\n    console.error(\"fetchStages API call failed:\", error);\n    throw error;\n  }\n};\n// --------------------------------------------------------\n// Message Handling Service\n// --------------------------------------------------------\nexport const processMessage = async (messageData, apiKey) => {\n  try {\n    return await handleApiCall(`${API_BASE_URL}/message`, 'POST', apiKey, messageData);\n  } catch (error) {\n    console.error(\"processMessage API call failed:\", error);\n    throw error;\n  }\n};\n// --------------------------------------------------------\n// defaultTemplates Management Service\n// --------------------------------------------------------\nexport const getDefaultTemplates = async apiKey => {\n  try {\n    return await handleApiCall(`${API_BASE_URL}/templates/defaultTemplates`, 'GET', apiKey);\n  } catch (error) {\n    console.error(\"getDefaultTemplates API call failed:\", error);\n    throw error;\n  }\n};\nexport const saveDefaultTemplate = async (templateData, apiKey) => {\n  try {\n    return await handleApiCall(`${API_BASE_URL}/templates/defaultTemplates`, 'POST', apiKey, templateData);\n  } catch (error) {\n    console.error(\"saveDefaultTemplate API call failed:\", error);\n    throw error;\n  }\n};\nexport const getStage = async (stageId, apiKey) => {\n  try {\n    return await handleApiCall(`${API_BASE_URL}/stage/${stageId}`, 'GET', apiKey);\n  } catch (error) {\n    console.error(\"getStage API call failed:\", error);\n    throw error;\n  }\n};\nexport const updateStage = async (stageId, stageData, apiKey) => {\n  try {\n    return await handleApiCall(`${API_BASE_URL}/stage/${stageId}`, 'PUT', apiKey, stageData);\n  } catch (error) {\n    console.error(\"updateStage API call failed:\", error);\n    throw error;\n  }\n};","map":{"version":3,"names":["axios","API_BASE_URL","handleApiCall","url","method","apiKey","data","headers","response","JSON","stringify","status","console","error","Error","saveConfig","userId","businessId","businessApiKey","Promise","resolve","localStorage","setItem","success","message","createUser","firstName","lastName","email","getItem","fetchBusinessDetails","createTemplate","templateData","fetchTemplates","createStage","stageData","API_ENDPOINT","fetchStages","processMessage","messageData","getDefaultTemplates","saveDefaultTemplate","getStage","stageId","updateStage"],"sources":["C:/icmp_events_api/front-end/src/services/testService.js"],"sourcesContent":["// File: src/services/testService.js\r\n// Last Modified: 2026-03-29\r\nimport axios from 'axios';\r\n\r\nconst API_BASE_URL = 'http://localhost:5000';\r\n\r\n// Helper function to handle API calls and error responses\r\nconst handleApiCall = async (url, method, apiKey, data = null) => {\r\n    const headers = {\r\n        'Authorization': `Bearer ${apiKey}`,\r\n        'Content-Type': 'application/json',\r\n    };\r\n\r\n    try {\r\n        const response = await axios({\r\n            method: method,\r\n            url: url,\r\n            headers: headers,\r\n            data: data ? JSON.stringify(data) : null, // Serialize data to JSON\r\n        });\r\n\r\n        if (response.status >= 200 && response.status < 300) {\r\n            return response.data;\r\n        } else {\r\n            console.error(\"API call failed:\", response);\r\n            throw new Error(`API call failed with status ${response.status}`);\r\n        }\r\n    } catch (error) {\r\n        console.error(\"API call failed:\", error);\r\n        throw error; // Re-throw the error for the component to handle\r\n    }\r\n};\r\n\r\n// --------------------------------------------------------\r\n// Configuration Service (Saving to localStorage - Insecure)\r\n// --------------------------------------------------------\r\nexport const saveConfig = async (apiKey, userId, businessId, businessApiKey) => {\r\n    // This function doesn't actually call an API. It only saves to localStorage.\r\n    return new Promise((resolve) => {\r\n        localStorage.setItem('icmpApiKey', apiKey);\r\n        resolve({ success: true, message: 'Configuration saved to localStorage' });\r\n    });\r\n};\r\n\r\n// --------------------------------------------------------\r\n// User Management Service (Simulated)\r\n// --------------------------------------------------------\r\nexport const createUser = async (firstName, lastName, email) => {\r\n    try {\r\n        const apiKey = localStorage.getItem('icmpApiKey');\r\n        return await handleApiCall(`${API_BASE_URL}/users`, 'POST', apiKey, {\r\n            firstName,\r\n            lastName,\r\n            email\r\n        });\r\n    } catch (error) {\r\n        console.error(\"createUser API call failed:\", error);\r\n        throw error;\r\n    }\r\n};\r\n// --------------------------------------------------------\r\n// Business Management Service\r\n// --------------------------------------------------------\r\nexport const fetchBusinessDetails = async (businessId, apiKey) => { //apiKey parameter here <----ADD ME\r\n    try {\r\n        return await handleApiCall(`${API_BASE_URL}/businesses/${businessId}`, 'GET', apiKey);  //apiKey parameter here <----ADD ME\r\n    } catch (error) {\r\n        console.error(\"fetchBusinessDetails API call failed:\", error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n// --------------------------------------------------------\r\n// Template Management Service\r\n// --------------------------------------------------------\r\nexport const createTemplate = async (templateData, apiKey) => {\r\n    try {\r\n        return await handleApiCall(`${API_BASE_URL}/templates`, 'POST', apiKey, templateData);\r\n    } catch (error) {\r\n        console.error(\"createTemplate API call failed:\", error);\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport const fetchTemplates = async (apiKey) => {\r\n    try {\r\n        return await handleApiCall(`${API_BASE_URL}/templates`, 'GET', apiKey);\r\n    } catch (error) {\r\n        console.error(\"fetchTemplates API call failed:\", error);\r\n        throw error;\r\n    }\r\n};\r\n\r\n// --------------------------------------------------------\r\n// Stage Management Service\r\n// --------------------------------------------------------\r\nexport const createStage = async (stageData, apiKey) => {\r\n    try {\r\n        const API_ENDPOINT = `${API_BASE_URL}/stages`;\r\n        return await handleApiCall(API_ENDPOINT, 'POST', apiKey, stageData);\r\n    } catch (error) {\r\n        console.error(\"createStage API call failed:\", error);\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport const fetchStages = async (businessId, apiKey) => {\r\n    try {\r\n        const API_ENDPOINT = `${API_BASE_URL}/stages`;\r\n        return await handleApiCall(API_ENDPOINT, 'GET', apiKey);\r\n    } catch (error) {\r\n        console.error(\"fetchStages API call failed:\", error);\r\n        throw error;\r\n    }\r\n};\r\n// --------------------------------------------------------\r\n// Message Handling Service\r\n// --------------------------------------------------------\r\nexport const processMessage = async (messageData, apiKey) => {\r\n    try {\r\n        return await handleApiCall(`${API_BASE_URL}/message`, 'POST', apiKey, messageData);\r\n    } catch (error) {\r\n        console.error(\"processMessage API call failed:\", error);\r\n        throw error;\r\n    }\r\n};\r\n// --------------------------------------------------------\r\n// defaultTemplates Management Service\r\n// --------------------------------------------------------\r\nexport const getDefaultTemplates = async (apiKey) => {\r\n    try {\r\n        return await handleApiCall(`${API_BASE_URL}/templates/defaultTemplates`, 'GET', apiKey);\r\n    } catch (error) {\r\n        console.error(\"getDefaultTemplates API call failed:\", error);\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport const saveDefaultTemplate = async (templateData, apiKey) => {\r\n    try {\r\n        return await handleApiCall(`${API_BASE_URL}/templates/defaultTemplates`, 'POST', apiKey, templateData);\r\n    } catch (error) {\r\n        console.error(\"saveDefaultTemplate API call failed:\", error);\r\n        throw error;\r\n    }\r\n};\r\n export const getStage = async (stageId, apiKey) => {\r\n    try {\r\n        return await handleApiCall(`${API_BASE_URL}/stage/${stageId}`, 'GET', apiKey);\r\n    } catch (error) {\r\n        console.error(\"getStage API call failed:\", error);\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport const updateStage = async (stageId, stageData, apiKey) => {\r\n    try {\r\n        return await handleApiCall(`${API_BASE_URL}/stage/${stageId}`, 'PUT', apiKey, stageData);\r\n    } catch (error) {\r\n        console.error(\"updateStage API call failed:\", error);\r\n        throw error;\r\n    }\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}