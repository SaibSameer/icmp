{"ast":null,"code":"var _jsxFileName = \"C:\\\\icmp_events_api\\\\front-end\\\\src\\\\pages\\\\StageEditorPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { Box, Typography, Paper, Breadcrumbs, Link, Container, CircularProgress, Alert } from '@mui/material';\nimport StageEditor from '../components/StageEditor';\nimport { getStoredCredentials } from '../utils/authUtils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StageEditorPage = () => {\n  _s();\n  const {\n    stageId\n  } = useParams();\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [stageName, setStageName] = useState('');\n\n  // Get stored credentials\n  const {\n    businessId,\n    businessApiKey\n  } = getStoredCredentials();\n  useEffect(() => {\n    // Check if we have the required credentials\n    if (!businessId || !businessApiKey) {\n      setError('Authentication required. Please log in.');\n      setLoading(false);\n      return;\n    }\n\n    // If we're creating a new stage, no need to fetch stage data\n    if (stageId === 'new') {\n      setLoading(false);\n      return;\n    }\n\n    // Fetch stage data to get the name for the breadcrumb\n    const fetchStageData = async () => {\n      try {\n        setLoading(true);\n        const response = await fetch(`/stages/${stageId}?business_id=${businessId}`, {\n          headers: {\n            'Authorization': `Bearer ${businessApiKey}`\n          }\n        });\n        if (!response.ok) {\n          throw new Error(`Failed to fetch stage: ${response.status}`);\n        }\n        const data = await response.json();\n        setStageName(data.stage_name || 'Unnamed Stage');\n      } catch (err) {\n        console.error('Error fetching stage:', err);\n        setError(`Failed to load stage: ${err.message}`);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchStageData();\n  }, [stageId, businessId, businessApiKey]);\n  const handleNavigateBack = () => {\n    navigate('/stage-management');\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"lg\",\n      sx: {\n        mt: 4,\n        mb: 4\n      },\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center',\n          height: '50vh'\n        },\n        children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"lg\",\n      sx: {\n        mt: 4,\n        mb: 4\n      },\n      children: [/*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"error\",\n        sx: {\n          mb: 2\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          mt: 2\n        },\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          component: \"button\",\n          variant: \"body1\",\n          onClick: handleNavigateBack,\n          children: \"Return to Stage Management\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"lg\",\n    sx: {\n      mt: 4,\n      mb: 4\n    },\n    children: [/*#__PURE__*/_jsxDEV(Paper, {\n      sx: {\n        p: 3,\n        mb: 3\n      },\n      children: [/*#__PURE__*/_jsxDEV(Breadcrumbs, {\n        \"aria-label\": \"breadcrumb\",\n        sx: {\n          mb: 2\n        },\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          component: \"button\",\n          variant: \"body1\",\n          onClick: handleNavigateBack,\n          color: \"inherit\",\n          underline: \"hover\",\n          children: \"Stage Management\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          color: \"text.primary\",\n          children: stageId === 'new' ? 'Create New Stage' : stageName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        component: \"h1\",\n        gutterBottom: true,\n        children: stageId === 'new' ? 'Create New Stage' : `Edit Stage: ${stageName}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(StageEditor, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 5\n  }, this);\n};\n_s(StageEditorPage, \"kCaM6PLYJ9jD+5HmIJ3arlTkBMM=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = StageEditorPage;\nexport default StageEditorPage;\nvar _c;\n$RefreshReg$(_c, \"StageEditorPage\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","Box","Typography","Paper","Breadcrumbs","Link","Container","CircularProgress","Alert","StageEditor","getStoredCredentials","jsxDEV","_jsxDEV","StageEditorPage","_s","stageId","navigate","loading","setLoading","error","setError","stageName","setStageName","businessId","businessApiKey","fetchStageData","response","fetch","headers","ok","Error","status","data","json","stage_name","err","console","message","handleNavigateBack","maxWidth","sx","mt","mb","children","display","justifyContent","alignItems","height","fileName","_jsxFileName","lineNumber","columnNumber","severity","component","variant","onClick","p","color","underline","gutterBottom","_c","$RefreshReg$"],"sources":["C:/icmp_events_api/front-end/src/pages/StageEditorPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { \r\n  Box, \r\n  Typography, \r\n  Paper, \r\n  Breadcrumbs, \r\n  Link, \r\n  Container,\r\n  CircularProgress,\r\n  Alert\r\n} from '@mui/material';\r\nimport StageEditor from '../components/StageEditor';\r\nimport { getStoredCredentials } from '../utils/authUtils';\r\n\r\nconst StageEditorPage = () => {\r\n  const { stageId } = useParams();\r\n  const navigate = useNavigate();\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [stageName, setStageName] = useState('');\r\n  \r\n  // Get stored credentials\r\n  const { businessId, businessApiKey } = getStoredCredentials();\r\n  \r\n  useEffect(() => {\r\n    // Check if we have the required credentials\r\n    if (!businessId || !businessApiKey) {\r\n      setError('Authentication required. Please log in.');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    \r\n    // If we're creating a new stage, no need to fetch stage data\r\n    if (stageId === 'new') {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    \r\n    // Fetch stage data to get the name for the breadcrumb\r\n    const fetchStageData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const response = await fetch(`/stages/${stageId}?business_id=${businessId}`, {\r\n          headers: {\r\n            'Authorization': `Bearer ${businessApiKey}`\r\n          }\r\n        });\r\n        \r\n        if (!response.ok) {\r\n          throw new Error(`Failed to fetch stage: ${response.status}`);\r\n        }\r\n        \r\n        const data = await response.json();\r\n        setStageName(data.stage_name || 'Unnamed Stage');\r\n      } catch (err) {\r\n        console.error('Error fetching stage:', err);\r\n        setError(`Failed to load stage: ${err.message}`);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    \r\n    fetchStageData();\r\n  }, [stageId, businessId, businessApiKey]);\r\n  \r\n  const handleNavigateBack = () => {\r\n    navigate('/stage-management');\r\n  };\r\n  \r\n  if (loading) {\r\n    return (\r\n      <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4 }}>\r\n        <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '50vh' }}>\r\n          <CircularProgress />\r\n        </Box>\r\n      </Container>\r\n    );\r\n  }\r\n  \r\n  if (error) {\r\n    return (\r\n      <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4 }}>\r\n        <Alert severity=\"error\" sx={{ mb: 2 }}>\r\n          {error}\r\n        </Alert>\r\n        <Box sx={{ mt: 2 }}>\r\n          <Link component=\"button\" variant=\"body1\" onClick={handleNavigateBack}>\r\n            Return to Stage Management\r\n          </Link>\r\n        </Box>\r\n      </Container>\r\n    );\r\n  }\r\n  \r\n  return (\r\n    <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4 }}>\r\n      <Paper sx={{ p: 3, mb: 3 }}>\r\n        <Breadcrumbs aria-label=\"breadcrumb\" sx={{ mb: 2 }}>\r\n          <Link \r\n            component=\"button\" \r\n            variant=\"body1\" \r\n            onClick={handleNavigateBack}\r\n            color=\"inherit\"\r\n            underline=\"hover\"\r\n          >\r\n            Stage Management\r\n          </Link>\r\n          <Typography color=\"text.primary\">\r\n            {stageId === 'new' ? 'Create New Stage' : stageName}\r\n          </Typography>\r\n        </Breadcrumbs>\r\n        \r\n        <Typography variant=\"h4\" component=\"h1\" gutterBottom>\r\n          {stageId === 'new' ? 'Create New Stage' : `Edit Stage: ${stageName}`}\r\n        </Typography>\r\n      </Paper>\r\n      \r\n      <StageEditor />\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default StageEditorPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}